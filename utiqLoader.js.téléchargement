(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{hasBrowserEnv:()=>fe,hasStandardBrowserEnv:()=>pe,hasStandardBrowserWebWorkerEnv:()=>me,navigator:()=>ge,origin:()=>he});const n=new class{#e="[-]";#t={error:"error",warn:"warn",info:"info",verbose:"verbose"};#n="info";get logLevel(){return this.#n}get logLevels(){return this.#t}setLogLevel(e){Object.hasOwn(this.#t,e)&&(this.#n=e)}initialize(e,t){this.#e=`[${e}]:`,t&&"verbose"===t&&(this.#n=this.#t.verbose)}logError(...e){console.error(this.#e,...e)}logWarn(...e){this.#n!==this.#t.warn&&this.#n!==this.#t.info&&this.#n!==this.#t.verbose||console.warn(this.#e,...e)}logInfo(...e){this.#n!==this.#t.info&&this.#n!==this.#t.verbose||console.info(this.#e,"[INFO]",...e)}logDebug(...e){this.#n===this.#t.verbose&&console.info(this.#e,"[DEBUG]",...e)}logTrace(...e){this.#n===this.#t.verbose&&console.info(this.#e,"[TRACE]",...e)}};function o(e,t){return function(){return e.apply(t,arguments)}}const{toString:i}=Object.prototype,{getPrototypeOf:r}=Object,a=(s=Object.create(null),e=>{const t=i.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())});var s;const c=e=>(e=e.toLowerCase(),t=>a(t)===e),l=e=>t=>typeof t===e,{isArray:d}=Array,u=l("undefined"),f=c("ArrayBuffer"),g=l("string"),p=l("function"),m=l("number"),h=e=>null!==e&&"object"==typeof e,C=e=>{if("object"!==a(e))return!1;const t=r(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},v=c("Date"),y=c("File"),w=c("Blob"),b=c("FileList"),O=c("URLSearchParams"),[E,T,S,D]=["ReadableStream","Request","Response","Headers"].map(c);function I(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,i;if("object"!=typeof e&&(e=[e]),d(e))for(o=0,i=e.length;o<i;o++)t.call(null,e[o],o,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let a;for(o=0;o<r;o++)a=i[o],t.call(null,e[a],a,e)}}function U(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,i=n.length;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,A=e=>!u(e)&&e!==k,q=(N="undefined"!=typeof Uint8Array&&r(Uint8Array),e=>N&&e instanceof N);var N;const R=c("HTMLFormElement"),P=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),_=c("RegExp"),L=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};I(n,((n,i)=>{let r;!1!==(r=t(n,i,e))&&(o[i]=r||n)})),Object.defineProperties(e,o)},x="abcdefghijklmnopqrstuvwxyz",F="0123456789",j={DIGIT:F,ALPHA:x,ALPHA_DIGIT:x+x.toUpperCase()+F},G=c("AsyncFunction"),M=(B="function"==typeof setImmediate,V=p(k.postMessage),B?setImmediate:V?(H=`axios@${Math.random()}`,$=[],k.addEventListener("message",(({source:e,data:t})=>{e===k&&t===H&&$.length&&$.shift()()}),!1),e=>{$.push(e),k.postMessage(H,"*")}):e=>setTimeout(e));var B,V,H,$;const z="undefined"!=typeof queueMicrotask?queueMicrotask.bind(k):"undefined"!=typeof process&&process.nextTick||M,W={isArray:d,isArrayBuffer:f,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=a(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&f(e.buffer),t},isString:g,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:h,isPlainObject:C,isReadableStream:E,isRequest:T,isResponse:S,isHeaders:D,isUndefined:u,isDate:v,isFile:y,isBlob:w,isRegExp:_,isFunction:p,isStream:e=>h(e)&&p(e.pipe),isURLSearchParams:O,isTypedArray:q,isFileList:b,forEach:I,merge:function e(){const{caseless:t}=A(this)&&this||{},n={},o=(o,i)=>{const r=t&&U(n,i)||i;C(n[r])&&C(o)?n[r]=e(n[r],o):C(o)?n[r]=e({},o):d(o)?n[r]=o.slice():n[r]=o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&I(arguments[e],o);return n},extend:(e,t,n,{allOwnKeys:i}={})=>(I(t,((t,i)=>{n&&p(t)?e[i]=o(t,n):e[i]=t}),{allOwnKeys:i}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let i,a,s;const c={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],o&&!o(s,e,t)||c[s]||(t[s]=e[s],c[s]=!0);e=!1!==n&&r(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:c,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(d(e))return e;let t=e.length;if(!m(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:R,hasOwnProperty:P,hasOwnProp:P,reduceDescriptors:L,freezeMethods:e=>{L(e,((t,n)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];p(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return d(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:U,global:k,isContextDefined:A,ALPHABET:j,generateString:(e=16,t=j.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(h(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const i=d(e)?[]:{};return I(e,((e,t)=>{const r=n(e,o+1);!u(r)&&(i[t]=r)})),t[o]=void 0,i}}return e};return n(e,0)},isAsyncFn:G,isThenable:e=>e&&(h(e)||p(e))&&p(e.then)&&p(e.catch),setImmediate:M,asap:z};function J(e,t,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i,this.status=i.status?i.status:null)}W.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const K=J.prototype,Y={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Y[e]={value:e}})),Object.defineProperties(J,Y),Object.defineProperty(K,"isAxiosError",{value:!0}),J.from=(e,t,n,o,i,r)=>{const a=Object.create(K);return W.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),J.call(a,e.message,t,n,o,i),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};const X=J;function Q(e){return W.isPlainObject(e)||W.isArray(e)}function Z(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function ee(e,t,n){return e?e.concat(t).map((function(e,t){return e=Z(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const te=W.toFlatObject(W,{},null,(function(e){return/^is[A-Z]/.test(e)})),ne=function(e,t,n){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=W.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!W.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,r=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(W.isDate(e))return e.toISOString();if(!s&&W.isBlob(e))throw new X("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(e)||W.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let s=e;if(e&&!i&&"object"==typeof e)if(W.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(W.isArray(e)&&function(e){return W.isArray(e)&&!e.some(Q)}(e)||(W.isFileList(e)||W.endsWith(n,"[]"))&&(s=W.toArray(e)))return n=Z(n),s.forEach((function(e,o){!W.isUndefined(e)&&null!==e&&t.append(!0===a?ee([n],o,r):null===a?n:n+"[]",c(e))})),!1;return!!Q(e)||(t.append(ee(i,n,r),c(e)),!1)}const d=[],u=Object.assign(te,{defaultVisitor:l,convertValue:c,isVisitable:Q});if(!W.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!W.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+o.join("."));d.push(n),W.forEach(n,(function(n,r){!0===(!(W.isUndefined(n)||null===n)&&i.call(t,n,W.isString(r)?r.trim():r,o,u))&&e(n,o?o.concat(r):[r])})),d.pop()}}(e),t};function oe(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ie(e,t){this._pairs=[],e&&ne(e,this,t)}const re=ie.prototype;re.append=function(e,t){this._pairs.push([e,t])},re.toString=function(e){const t=e?function(t){return e.call(this,t,oe)}:oe;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ae=ie;function se(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ce(e,t,n){if(!t)return e;const o=n&&n.encode||se,i=n&&n.serialize;let r;if(r=i?i(t,n):W.isURLSearchParams(t)?t.toString():new ae(t,n).toString(o),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const le=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},de={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ue={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ae,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},fe="undefined"!=typeof window&&"undefined"!=typeof document,ge="object"==typeof navigator&&navigator||void 0,pe=fe&&(!ge||["ReactNative","NativeScript","NS"].indexOf(ge.product)<0),me="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,he=fe&&window.location.href||"http://localhost",Ce={...t,...ue},ve=function(e){function t(e,n,o,i){let r=e[i++];if("__proto__"===r)return!0;const a=Number.isFinite(+r),s=i>=e.length;return r=!r&&W.isArray(o)?o.length:r,s?(W.hasOwnProp(o,r)?o[r]=[o[r],n]:o[r]=n,!a):(o[r]&&W.isObject(o[r])||(o[r]=[]),t(e,n,o[r],i)&&W.isArray(o[r])&&(o[r]=function(e){const t={},n=Object.keys(e);let o;const i=n.length;let r;for(o=0;o<i;o++)r=n[o],t[r]=e[r];return t}(o[r])),!a)}if(W.isFormData(e)&&W.isFunction(e.entries)){const n={};return W.forEachEntry(e,((e,o)=>{t(function(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null},ye={transitional:de,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,i=W.isObject(e);if(i&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return o?JSON.stringify(ve(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ne(e,new Ce.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return Ce.isNode&&W.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=W.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ne(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),function(e,t,n){if(W.isString(e))try{return(0,JSON.parse)(e),W.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ye.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw X.from(e,X.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ce.classes.FormData,Blob:Ce.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],(e=>{ye.headers[e]={}}));const we=ye,be=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Oe=Symbol("internals");function Ee(e){return e&&String(e).trim().toLowerCase()}function Te(e){return!1===e||null==e?e:W.isArray(e)?e.map(Te):String(e)}function Se(e,t,n,o,i){return W.isFunction(o)?o.call(this,t,n):(i&&(t=n),W.isString(t)?W.isString(o)?-1!==t.indexOf(o):W.isRegExp(o)?o.test(t):void 0:void 0)}class De{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function i(e,t,n){const i=Ee(t);if(!i)throw new Error("header name must be a non-empty string");const r=W.findKey(o,i);(!r||void 0===o[r]||!0===n||void 0===n&&!1!==o[r])&&(o[r||t]=Te(e))}const r=(e,t)=>W.forEach(e,((e,n)=>i(e,n,t)));if(W.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(W.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,o,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),o=e.substring(i+1).trim(),!n||t[n]&&be[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t);else if(W.isHeaders(e))for(const[t,o]of e.entries())i(o,t,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=Ee(e)){const n=W.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(W.isFunction(t))return t.call(this,e,n);if(W.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ee(e)){const n=W.findKey(this,e);return!(!n||void 0===this[n]||t&&!Se(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function i(e){if(e=Ee(e)){const i=W.findKey(n,e);!i||t&&!Se(0,n[i],i,t)||(delete n[i],o=!0)}}return W.isArray(e)?e.forEach(i):i(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const i=t[n];e&&!Se(0,this[i],i,e,!0)||(delete this[i],o=!0)}return o}normalize(e){const t=this,n={};return W.forEach(this,((o,i)=>{const r=W.findKey(n,i);if(r)return t[r]=Te(o),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=Te(o),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return W.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&W.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Oe]=this[Oe]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=Ee(e);t[o]||(function(e,t){const n=W.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,i){return this[o].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[o]=!0)}return W.isArray(e)?e.forEach(o):o(e),this}}De.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),W.reduceDescriptors(De.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),W.freezeMethods(De);const Ie=De;function Ue(e,t){const n=this||we,o=t||n,i=Ie.from(o.headers);let r=o.data;return W.forEach(e,(function(e){r=e.call(n,r,i.normalize(),t?t.status:void 0)})),i.normalize(),r}function ke(e){return!(!e||!e.__CANCEL__)}function Ae(e,t,n){X.call(this,null==e?"canceled":e,X.ERR_CANCELED,t,n),this.name="CanceledError"}W.inherits(Ae,X,{__CANCEL__:!0});const qe=Ae;function Ne(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new X("Request failed with status code "+n.status,[X.ERR_BAD_REQUEST,X.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Re=(e,t,n=3)=>{let o=0;const i=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let i,r=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=o[a];i||(i=c),n[r]=s,o[r]=c;let d=a,u=0;for(;d!==r;)u+=n[d++],d%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),c-i<t)return;const f=l&&c-l;return f?Math.round(1e3*u/f):void 0}}(50,250);return function(e,t){let n,o,i=0,r=1e3/t;const a=(t,r=Date.now())=>{i=r,n=null,o&&(clearTimeout(o),o=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-i;s>=r?a(e,t):(n=e,o||(o=setTimeout((()=>{o=null,a(n)}),r-s)))},()=>n&&a(n)]}((n=>{const r=n.loaded,a=n.lengthComputable?n.total:void 0,s=r-o,c=i(s);o=r,e({loaded:r,total:a,progress:a?r/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&r<=a?(a-r)/c:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},Pe=(e,t)=>{const n=null!=e;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},_e=e=>(...t)=>W.asap((()=>e(...t))),Le=Ce.hasStandardBrowserEnv?function(){const e=Ce.navigator&&/(msie|trident)/i.test(Ce.navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=W.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},xe=Ce.hasStandardBrowserEnv?{write(e,t,n,o,i,r){const a=[e+"="+encodeURIComponent(t)];W.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),W.isString(o)&&a.push("path="+o),W.isString(i)&&a.push("domain="+i),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Fe(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const je=e=>e instanceof Ie?{...e}:e;function Ge(e,t){t=t||{};const n={};function o(e,t,n){return W.isPlainObject(e)&&W.isPlainObject(t)?W.merge.call({caseless:n},e,t):W.isPlainObject(t)?W.merge({},t):W.isArray(t)?t.slice():t}function i(e,t,n){return W.isUndefined(t)?W.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function r(e,t){if(!W.isUndefined(t))return o(void 0,t)}function a(e,t){return W.isUndefined(t)?W.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function s(n,i,r){return r in t?o(n,i):r in e?o(void 0,n):void 0}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(je(e),je(t),!0)};return W.forEach(Object.keys(Object.assign({},e,t)),(function(o){const r=c[o]||i,a=r(e[o],t[o],o);W.isUndefined(a)&&r!==s||(n[o]=a)})),n}const Me=e=>{const t=Ge({},e);let n,{data:o,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:a,headers:s,auth:c}=t;if(t.headers=s=Ie.from(s),t.url=ce(Fe(t.baseURL,t.url),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),W.isFormData(o))if(Ce.hasStandardBrowserEnv||Ce.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(Ce.hasStandardBrowserEnv&&(i&&W.isFunction(i)&&(i=i(t)),i||!1!==i&&Le(t.url))){const e=r&&a&&xe.read(a);e&&s.set(r,e)}return t},Be="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const o=Me(e);let i=o.data;const r=Ie.from(o.headers).normalize();let a,s,c,l,d,{responseType:u,onUploadProgress:f,onDownloadProgress:g}=o;function p(){l&&l(),d&&d(),o.cancelToken&&o.cancelToken.unsubscribe(a),o.signal&&o.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function h(){if(!m)return;const o=Ie.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ne((function(e){t(e),p()}),(function(e){n(e),p()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:o,config:e,request:m}),m=null}m.open(o.method.toUpperCase(),o.url,!0),m.timeout=o.timeout,"onloadend"in m?m.onloadend=h:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(h)},m.onabort=function(){m&&(n(new X("Request aborted",X.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new X("Network Error",X.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const i=o.transitional||de;o.timeoutErrorMessage&&(t=o.timeoutErrorMessage),n(new X(t,i.clarifyTimeoutError?X.ETIMEDOUT:X.ECONNABORTED,e,m)),m=null},void 0===i&&r.setContentType(null),"setRequestHeader"in m&&W.forEach(r.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),W.isUndefined(o.withCredentials)||(m.withCredentials=!!o.withCredentials),u&&"json"!==u&&(m.responseType=o.responseType),g&&([c,d]=Re(g,!0),m.addEventListener("progress",c)),f&&m.upload&&([s,l]=Re(f),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",l)),(o.cancelToken||o.signal)&&(a=t=>{m&&(n(!t||t.type?new qe(null,e,m):t),m.abort(),m=null)},o.cancelToken&&o.cancelToken.subscribe(a),o.signal&&(o.signal.aborted?a():o.signal.addEventListener("abort",a)));const C=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(o.url);C&&-1===Ce.protocols.indexOf(C)?n(new X("Unsupported protocol "+C+":",X.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Ve=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,o=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;o.abort(t instanceof X?t:new qe(t instanceof Error?t.message:t))}};let r=t&&setTimeout((()=>{r=null,i(new X(`timeout ${t} of ms exceeded`,X.ETIMEDOUT))}),t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:s}=o;return s.unsubscribe=()=>W.asap(a),s}},He=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let o,i=0;for(;i<n;)o=i+t,yield e.slice(i,o),i=o},$e=(e,t,n,o)=>{const i=async function*(e,t){for await(const n of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}}(e))yield*He(n,t)}(e,t);let r,a=0,s=e=>{r||(r=!0,o&&o(e))};return new ReadableStream({async pull(e){try{const{done:t,value:o}=await i.next();if(t)return s(),void e.close();let r=o.byteLength;if(n){let e=a+=r;n(e)}e.enqueue(new Uint8Array(o))}catch(e){throw s(e),e}},cancel:e=>(s(e),i.return())},{highWaterMark:2})},ze="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,We=ze&&"function"==typeof ReadableStream,Je=ze&&("function"==typeof TextEncoder?(Ke=new TextEncoder,e=>Ke.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Ke;const Ye=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Xe=We&&Ye((()=>{let e=!1;const t=new Request(Ce.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Qe=We&&Ye((()=>W.isReadableStream(new Response("").body))),Ze={stream:Qe&&(e=>e.body)};var et;ze&&(et=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Ze[e]&&(Ze[e]=W.isFunction(et[e])?t=>t[e]():(t,n)=>{throw new X(`Response type '${e}' is not supported`,X.ERR_NOT_SUPPORT,n)})})));const tt={http:null,xhr:Be,fetch:ze&&(async e=>{let{url:t,method:n,data:o,signal:i,cancelToken:r,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:d,withCredentials:u="same-origin",fetchOptions:f}=Me(e);l=l?(l+"").toLowerCase():"text";let g,p=Ve([i,r&&r.toAbortSignal()],a);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let h;try{if(c&&Xe&&"get"!==n&&"head"!==n&&0!==(h=await(async(e,t)=>{const n=W.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(W.isBlob(e))return e.size;if(W.isSpecCompliantForm(e)){const t=new Request(Ce.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return W.isArrayBufferView(e)||W.isArrayBuffer(e)?e.byteLength:(W.isURLSearchParams(e)&&(e+=""),W.isString(e)?(await Je(e)).byteLength:void 0)})(t):n})(d,o))){let e,n=new Request(t,{method:"POST",body:o,duplex:"half"});if(W.isFormData(o)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Pe(h,Re(_e(c)));o=$e(n.body,65536,e,t)}}W.isString(u)||(u=u?"include":"omit");const i="credentials"in Request.prototype;g=new Request(t,{...f,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:i?u:void 0});let r=await fetch(g);const a=Qe&&("stream"===l||"response"===l);if(Qe&&(s||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=r[t]}));const t=W.toFiniteNumber(r.headers.get("content-length")),[n,o]=s&&Pe(t,Re(_e(s),!0))||[];r=new Response($e(r.body,65536,n,(()=>{o&&o(),m&&m()})),e)}l=l||"text";let C=await Ze[W.findKey(Ze,l)||"text"](r,e);return!a&&m&&m(),await new Promise(((t,n)=>{Ne(t,n,{data:C,headers:Ie.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:g})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new X("Network Error",X.ERR_NETWORK,e,g),{cause:t.cause||t});throw X.from(t,t&&t.code,e,g)}})};W.forEach(tt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const nt=e=>`- ${e}`,ot=e=>W.isFunction(e)||null===e||!1===e,it=e=>{e=W.isArray(e)?e:[e];const{length:t}=e;let n,o;const i={};for(let r=0;r<t;r++){let t;if(n=e[r],o=n,!ot(n)&&(o=tt[(t=String(n)).toLowerCase()],void 0===o))throw new X(`Unknown adapter '${t}'`);if(o)break;i[t||"#"+r]=o}if(!o){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(nt).join("\n"):" "+nt(e[0]):"as no adapter specified";throw new X("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function rt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new qe(null,e)}function at(e){return rt(e),e.headers=Ie.from(e.headers),e.data=Ue.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),it(e.adapter||we.adapter)(e).then((function(t){return rt(e),t.data=Ue.call(e,e.transformResponse,t),t.headers=Ie.from(t.headers),t}),(function(t){return ke(t)||(rt(e),t&&t.response&&(t.response.data=Ue.call(e,e.transformResponse,t.response),t.response.headers=Ie.from(t.response.headers))),Promise.reject(t)}))}const st={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{st[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ct={};st.transitional=function(e,t,n){function o(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,r)=>{if(!1===e)throw new X(o(i," has been removed"+(t?" in "+t:"")),X.ERR_DEPRECATED);return t&&!ct[i]&&(ct[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,r)}};const lt={assertOptions:function(e,t,n){if("object"!=typeof e)throw new X("options must be an object",X.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let i=o.length;for(;i-- >0;){const r=o[i],a=t[r];if(a){const t=e[r],n=void 0===t||a(t,r,e);if(!0!==n)throw new X("option "+r+" must be "+n,X.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new X("Unknown option "+r,X.ERR_BAD_OPTION)}},validators:st},dt=lt.validators;class ut{constructor(e){this.defaults=e,this.interceptors={request:new le,response:new le}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ge(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:i}=t;void 0!==n&&lt.assertOptions(n,{silentJSONParsing:dt.transitional(dt.boolean),forcedJSONParsing:dt.transitional(dt.boolean),clarifyTimeoutError:dt.transitional(dt.boolean)},!1),null!=o&&(W.isFunction(o)?t.paramsSerializer={serialize:o}:lt.assertOptions(o,{encode:dt.function,serialize:dt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=i&&W.merge(i.common,i[t.method]);i&&W.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Ie.concat(r,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!s){const e=[at.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),d=e.length,l=Promise.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=a.length;let f=t;for(u=0;u<d;){const e=a[u++],t=a[u++];try{f=e(f)}catch(e){t.call(this,e);break}}try{l=at.call(this,f)}catch(e){return Promise.reject(e)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return ce(Fe((e=Ge(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}W.forEach(["delete","get","head","options"],(function(e){ut.prototype[e]=function(t,n){return this.request(Ge(n||{},{method:e,url:t,data:(n||{}).data}))}})),W.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,i){return this.request(Ge(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}ut.prototype[e]=t(),ut.prototype[e+"Form"]=t(!0)}));const ft=ut;class gt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,i){n.reason||(n.reason=new qe(e,o,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new gt((function(t){e=t})),cancel:e}}}const pt=gt,mt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mt).forEach((([e,t])=>{mt[t]=e}));const ht=mt,Ct=function e(t){const n=new ft(t),i=o(ft.prototype.request,n);return W.extend(i,ft.prototype,n,{allOwnKeys:!0}),W.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Ge(t,n))},i}(we);Ct.Axios=ft,Ct.CanceledError=qe,Ct.CancelToken=pt,Ct.isCancel=ke,Ct.VERSION="1.7.7",Ct.toFormData=ne,Ct.AxiosError=X,Ct.Cancel=Ct.CanceledError,Ct.all=function(e){return Promise.all(e)},Ct.spread=function(e){return function(t){return e.apply(null,t)}},Ct.isAxiosError=function(e){return W.isObject(e)&&!0===e.isAxiosError},Ct.mergeConfig=Ge,Ct.AxiosHeaders=Ie,Ct.formToJSON=e=>ve(W.isHTMLForm(e)?new FormData(e):e),Ct.getAdapter=it,Ct.HttpStatusCode=ht,Ct.default=Ct;const vt=Ct;var yt=function(){return localStorage.getItem("utiqStub")};const wt=e=>{try{return atob(e)}catch(t){throw t instanceof DOMException&&"InvalidCharacterError"===t.name?(n.logError(`Value "${e}" is not valid base64`),t):(n.logError(`An error occured when decoding "${e}"`),t)}};var bt=function(e){var t=e.name,o=e.value,i=e.days,r=void 0===i?90:i,a=e.path,s=void 0===a?"/":a,c=e.domain,l=void 0===c?"":c;if(!t||null==o||""===o)return"";var d=new Date;d.setTime(d.getTime()+24*r*60*60*1e3);var u=d.toUTCString(),f=s?" path=".concat(s,";"):"",g=l?" domain=".concat(l,";"):"",p="".concat(t,"=").concat(o,"; expires=").concat(u,";").concat(f).concat(g);return n.logDebug("Returning new cookie value: ".concat(p)),p},Ot=function(e,t){var o="".concat(t,"="),i=decodeURIComponent(e);if(!i.includes(o))return n.logDebug("Decoded cookies string: ".concat(JSON.stringify(i)," does not include ").concat(t," cookie. Returning...")),"";for(var r=i.split(";"),a=0;a<r.length;a++){var s=r[a];if(s){for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(o)){var c=s.substring(o.length,s.length);return n.logDebug("Cookie ".concat(t," found. Value ").concat(c,".")),c}}}return n.logDebug("Cookie ".concat(t," found, but the value has not been found. Decoded cookie string: ").concat(JSON.stringify(i),".")),""};const Et=(e,t)=>{try{const n=Ot(e,t);return wt(n)}catch(e){if(e instanceof DOMException&&"InvalidCharacterError"===e.name)return n.logInfo(`Invalid cookie "${t}" is being cleared...`),document.cookie=bt({name:t,value:"none",days:0}),n.logInfo(`Cookie "${t}" has been cleared.`),"";throw e}};var Tt,St=new Uint8Array(16);function Dt(){if(!Tt&&!(Tt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tt(St)}const It=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Ut=[],kt=0;kt<256;++kt)Ut.push((kt+256).toString(16).substr(1));const At=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Ut[e[t+0]]+Ut[e[t+1]]+Ut[e[t+2]]+Ut[e[t+3]]+"-"+Ut[e[t+4]]+Ut[e[t+5]]+"-"+Ut[e[t+6]]+Ut[e[t+7]]+"-"+Ut[e[t+8]]+Ut[e[t+9]]+"-"+Ut[e[t+10]]+Ut[e[t+11]]+Ut[e[t+12]]+Ut[e[t+13]]+Ut[e[t+14]]+Ut[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&It.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},qt=function(e,t,n){var o=(e=e||{}).random||(e.rng||Dt)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=o[i];return t}return At(o)},Nt="utiq_consent_status",Rt="utiqEligibility",Pt=e=>"string"!=typeof e||""===e?null:`${e}_logging_level`;var _t={Utiq:"Utiq"};const Lt={onIdsAvailable:{name:"onIdsAvailable",fieldsTemplate:[{key:"mtid",isOptional:!1,type:"string"},{key:"atid",isOptional:!1,type:"string"},{key:"attrid",isOptional:!0,type:"string"},{key:"category",isOptional:!1,type:"string"}]},onConsentUpdateFinished:{name:"onConsentUpdateFinished",fieldsTemplate:[{key:"isConsentGranted",isOptional:!1,type:"boolean"}]},onConsentChanging:{name:"onConsentChanging",fieldsTemplate:[{key:"isConsentGranted",isOptional:!1,type:"boolean"}]},onInitialised:{name:"onInitialised",fieldsTemplate:[]},onEligibilityChecked:{name:"onEligibilityChecked",fieldsTemplate:[{key:"isEligible",isOptional:!1,type:"boolean"}]},onDidomiConsentChanged:{name:"onDidomiConsentChanged",fieldsTemplate:[]},onConsentManagerStatusChanged:{name:"onConsentManagerStatusChanged",fieldsTemplate:[{key:"status",isOptional:!1,type:"string"}]},onFlowCompleted:{name:"onFlowCompleted",fieldsTemplate:[{key:"status",isOptional:!0,type:"string"}]}};var xt=function(e){var t,n,o=null===(n=null===(t=window.Utiq)||void 0===t?void 0:t.config)||void 0===n?void 0:n[{Utiq:"customUtiqHost"}[e]];return null!=o&&""!==o?o:null},Ft=function(e){var t=e.fieldsTemplate,o=void 0===t?[]:t,i=e.validationTargetObject,r=e.logIdentificator;if(!r)return n.logError("Missing log identificator"),{isValid:!1};if(!i)return n.logError("Missing validation target for ".concat(r)),{isValid:!1};if("object"!=typeof i)return n.logError("Wrong type for ".concat(i)),{isValid:!1};if(null===o)return n.logError("Fields template were set to ".concat(o," for ").concat(r," and cannot be validated. Returning with negative validation result...")),{isValid:!1};0===o.length&&n.logDebug("No fields template provided for ".concat(r,". Continuing without fields validation..."));var a=Object.keys(i),s=o.map((function(e){return e.key}));if(!a.every((function(e){return s.includes(e)})))return n.logError("Validation target has more fields than present in ".concat(r," fields template.")),n.logWarn("Validation target keys:",a),n.logWarn("Fields template keys:",s),{isValid:!1};var c=[];try{o.forEach((function(e){if("string"==typeof e.key&&"boolean"==typeof e.isOptional&&"string"==typeof e.type){var t=e.key,n=i[t];null!=n?("array"===e.type?Array.isArray(n):typeof n===e.type&&!Array.isArray(n))||c.push("Field ".concat(e.key," expected type ").concat(e.type,", but got ").concat(typeof i[t]," for ").concat(r)):e.isOptional||c.push("Field ".concat(e.key," is missing for ").concat(r))}else c.push("Field template ".concat(JSON.stringify(e)," is of incorrect format for ").concat(r))}))}catch(e){c.push(e.message)}return c.forEach((function(e){n.logError(e)})),{isValid:0===c.length}};const jt=(e,t,o={})=>{const i=((e,t)=>{try{return e===_t.Utiq?Lt[t].fieldsTemplate:(n.logError(`Unrecognized environment ${e} for event ${t}`),null)}catch(e){return n.logError(`Event ${t} is not defined. Make sure that the event name is correct or create a new event with this name`),null}})(t,e),{isValid:r}=Ft({fieldsTemplate:i,validationTargetObject:o,logIdentificator:e});if(r){const i=window.Utiq?.listeners?.[e]||[];if(!Array.isArray(i))return void n.logDebug(`Listeners for ${e} in the ${t} environment are not an array. Cannot publish the event...`);try{i.forEach((e=>{e(o,t)}))}catch(o){n.logDebug(`Error occurred when processing ${e} listeners in the ${t} environment. Description: ${o}.`)}}};var Gt=!1,Mt=function(e,t){var o,i,r,a={Utiq:Lt};if(Array.isArray(e)&&(null===(o=null==e?void 0:e[0])||void 0===o?void 0:o.mtid)&&(null===(i=null==e?void 0:e[0])||void 0===i?void 0:i.atid)){var s=e[0],c=s.mtid,l=s.atid,d=s.attrid,u=s.category;n.logDebug("Dispatching onIdsAvailable event:",JSON.stringify({mtid:c,atid:l,attrid:d,category:u})),n.logInfo("If you are running the Utiq Web SDK from iOS webview, soon ATT will be required to acquire the atid"),jt(a[t].onIdsAvailable.name,t,{mtid:c,atid:l,attrid:d,category:u}),window.Utiq||(window.Utiq={}),(r=window.Utiq).data||(r.data={}),window.Utiq.data.wereIdsDispatched=!0,Gt||(Gt=!0,jt(a[t].onFlowCompleted.name,t))}},Bt=function(e){return"string"==typeof e&&"localStorage"===e?"localStorage":"sessionStorage"},Vt=function(e){return function(t,n){return window[Bt(e)].setItem(t,JSON.stringify(n))}},Ht=function(e){return function(t){return JSON.parse(window[Bt(e)].getItem(t))}},$t=function(e){return{set:Vt(e),get:Ht(e)}},zt=function(e){var t,n=$t(e.IDCONNECT_STORAGE_TYPE).get(e.IDCONNECT_DATA_STORAGE);return null!=n?null===(t=null==n?void 0:n.connectId)||void 0===t?void 0:t.idGraph:null},Wt=function(e,t){var o=function(){return function(e,t){var o=document.createElement("script");o.setAttribute("id","utiq__consent-manager"),n.logTrace("Calling for consent manager origin with params isLocalEnvironment: ".concat(e," and utiqHost: ").concat(t,"..."));var i=((e,t)=>e?window.location.origin:window.Utiq?.config?.consentManagerOrigin?window.Utiq?.config?.consentManagerOrigin:t)(e,t);n.logDebug("Setting consent manager from origin ".concat(i,"...")),o.src="".concat(i,"/utiqConsentManager.js"),document.head.appendChild(o),n.logDebug("Consent manager appended to the document head")}(e,t)};!function(e){var t;window.Utiq||(window.Utiq={}),(t=window.Utiq).API||(t.API={}),window.Utiq.API.showConsentManager=e}(o);var i=Et(document.cookie,Nt),r=null!==sessionStorage.getItem("utiq_ask_me_later")&&JSON.parse(sessionStorage.getItem("utiq_ask_me_later"));i||r||(n.logInfo("No consent status cookie found. Showing consent manager popup..."),o())},Jt=function(){return Jt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Jt.apply(this,arguments)},Kt="utiqDataCallTimestamp",Yt="utiq_consent_shown",Xt=function(){var e,t,o=localStorage;"string"==typeof(null===(e=window.IDCONNECT_CONFIG)||void 0===e?void 0:e.IDCONNECT_STORAGE_TYPE)&&"sessionStorage"===window.IDCONNECT_CONFIG.IDCONNECT_STORAGE_TYPE&&(o=sessionStorage);var i=(null===(t=window.IDCONNECT_CONFIG)||void 0===t?void 0:t.IDCONNECT_DATA_STORAGE)?window.IDCONNECT_CONFIG.IDCONNECT_DATA_STORAGE:"utiqPass";"string"==typeof i&&null!==o.getItem(i)&&o.removeItem(i),null!==localStorage.getItem(Rt)&&localStorage.removeItem(Rt),null!==localStorage.getItem(Kt)&&localStorage.removeItem(Kt),null!==sessionStorage.getItem(Yt)&&sessionStorage.removeItem(Yt),n.logDebug("Cleared IDConnect data from storage")};const Qt=e=>{try{return btoa(e)}catch(t){throw t instanceof DOMException&&"InvalidCharacterError"===t.name?(n.logError(`The value ${e} contained a character that could not be encoded`),t):(n.logError(`An error occured when decoding "${e}"`),t)}};var Zt=function(e){for(var t="base_domain_verifier_cookie=cookie",o=e.split("."),i="",r=o.length-1;r>=0;r--)if(i=o.slice(r).join("."),document.cookie="".concat(t,";domain=.").concat(i,";"),document.cookie.indexOf(t)>-1)return document.cookie="".concat(t.split("=")[0],"=;domain=.").concat(i,";expires=Thu, 01 Jan 1970 00:00:01 GMT;"),i;return n.logDebug("Not able to get the base domain of the provided URL: ".concat(e," relatively to the current host")),e.replace("https://utiq.","").replace("https://","").replace("https://utiq-test.","")},en=function(e,t){n.logInfo("Data clear request made. Clearing the Utiq data..."),!!e&&"false"===e||(document.cookie=bt({name:Nt,value:Qt(!1),days:180,domain:Zt(window.location.hostname)}),jt(Lt.onConsentUpdateFinished.name,_t.Utiq,{isConsentGranted:!1})),Xt();var o=Pt(t.toLowerCase()),i=Et(document.cookie,o);i&&"verbose"===i&&(document.cookie=bt({name:o,value:Qt("info"),days:0}))};const tn=[{key:"listeners",isOptional:!0,type:"object"},{key:"customUtiqHost",isOptional:!0,type:"string"},{key:"consentManagerOrigin",isOptional:!0,type:"string"},{key:"oncePerTimeInterval",isOptional:!0,type:"number"},{key:"customizationOptions",isOptional:!0,type:"object"}],nn=[{key:"utiqHost",isOptional:!1,type:"string"},{key:"apiPath",isOptional:!1,type:"string"},{key:"oncePerSession",isOptional:!1,type:"boolean"}],on={name:"Optanon",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"useGroups",isOptional:!0,type:"boolean"},{key:"OptanonDelay",isOptional:!1,type:"number"},...nn,...tn],groupsString:"groups",vendorsString:"genVendors",utiqString:"utiq",cookieName:"OptanonConsent"},rn={name:"TCF",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"tcfPurposes",isOptional:!1,type:"array"},{key:"tcfVendors",isOptional:!1,type:"array"},{key:"tcfApiMaxDelay",isOptional:!1,type:"number"},{key:"tcfApiTimeStep",isOptional:!1,type:"number"},...nn,...tn],events:{loaded:"tcloaded",complete:"useractioncomplete"},apiCommands:{data:"getTCData",listener:"addEventListener",customConsent:"getCustomVendorConsents"}},an={name:"Sourcepoint",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"tcfPurposes",isOptional:!1,type:"array"},{key:"tcfVendors",isOptional:!1,type:"array"},{key:"tcfCustomPurposes",isOptional:!1,type:"array"},{key:"tcfCustomVendors",isOptional:!1,type:"array"},{key:"tcfApiMaxDelay",isOptional:!1,type:"number"},{key:"tcfApiTimeStep",isOptional:!1,type:"number"},...nn,...tn]},sn={name:"Usercentrics",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"localStorageKey",isOptional:!1,type:"string"},{key:"consentIndex",isOptional:!1,type:"number"},...nn,...tn],event:{type:"ucEvent",name:"consent_changed"}},cn={name:"Didomi",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"didomiUtiqPurposeId",isOptional:!1,type:"string"},{key:"didomiUtiqVendorId",isOptional:!1,type:"string"},...nn,...tn]},ln={name:"Custom",fieldsTemplate:[{key:"CMP",isOptional:!0,type:"string"},{key:"consentManagerDataLayer",isOptional:!0,type:"boolean"},...nn,...tn]},dn="true",un="false",fn="accepted",gn="rejected",pn=({hostname:e,processConsentChange:t,isConsentGranted:o})=>{"boolean"==typeof o?(n.logDebug(`Processing custom consent value of ${o}...`),t(o,{[e]:{name:"customConsent",value:"utiqConsent",consentParsed:o?"general:1":"general:0",consentState:o?fn:gn}})):n.logError("Custom CMP - Consent value dispatched with custom CMP event is not a boolean value")};var mn=function(e){var t=e.hostname,o=e.processConsentChange,i=e.config;window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){var r,a=e.getUserConsentStatusForPurpose(i.didomiUtiqPurposeId),s=e.getUserConsentStatusForVendor(i.didomiUtiqVendorId),c=Boolean(a&&s);n.logDebug("Processing Didomi consent value of ".concat(c,"...")),o(c,((r={})[t]={name:"didomiConsent",value:"purposeConsent=".concat(a,";vendorConsent=").concat(s),consentParsed:c?dn:un,consentState:c?fn:gn},r))})),n.logDebug("Consent processing attached to Didomi SDK didomiOnReady function...")},hn=function(e,t,n){window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(o){var i=o.openTransaction();e?(i.enablePurpose(t),i.enableVendor(n)):(i.disablePurpose(t),i.disableVendor(n)),i.commit()}))};const Cn=e=>{__tcfapi(rn.apiCommands.data,2,e)},vn=e=>{__tcfapi(rn.apiCommands.customConsent,2,e)},yn=({tcfCustomPurposes:e,purposeGrants:t})=>{for(const n of e)if(!t[n])return!1;return!0},wn=({tcData:e,type:t,idsArray:o})=>(({tcData:e,type:t,idsArray:o})=>t?e[t]?.consents?Array.isArray(o)?!!o.length||(n.logWarn(`validateTcfData: IDs array of type ${t} is empty`),!1):(n.logWarn(`validateTcfData: Missing IDs array of type ${t}`),!1):(n.logWarn(`validateTcfData: tcData["${t}"].consents is missing or not defined`),!1):(n.logWarn("validateTcfData: missing type"),!1))({tcData:e,type:t,idsArray:o})?!o.some((n=>!e[t].consents[n])):(n.logDebug("TCF data validation failed"),!1),bn=({hostname:e,readCookie:t,processConsentChange:o,config:i,tcData:r})=>{let a=wn({tcData:r,type:"purpose",idsArray:i.tcfPurposes});a&&(a=wn({tcData:r,type:"vendor",idsArray:i.tcfVendors}));const s=i.tcfPurposes.map((e=>(r?.purpose?.consents?.[e],`${e}:0`))).join(",");n.logDebug(`Processing TCF consent value of ${a}...`),o(a,{[e]:{name:i.cookieName||"tcString",value:i.cookieName?t(document.cookie,i.cookieName):r.tcString,consentParsed:s,consentState:a?fn:gn}})},On=({hostname:e,readCookie:t,processConsentChange:o,config:i})=>{let r=0;if("function"!=typeof __tcfapi)return void(r<i.tcfApiMaxDelay?(r+=i.tcfApiTimeStep,setTimeout((()=>On(i)),i.tcfApiTimeStep)):n.logError(`No __tcfapi available after two tries with ${i.tcfApiMaxDelay}ms timeout`));const a=(({tcfCustomVendors:e,tcfCustomPurposes:t})=>(n,o)=>(i,r)=>{if(!r)return void o(new Error("getCustomVendorConsents call was unsuccessful"));const{grants:a}=i,s=(({tcfCustomVendors:e,tcfCustomPurposes:t,grants:n})=>{for(const o of e)return!!n[o]?.vendorGrant&&yn({tcfCustomPurposes:t,purposeGrants:n[o].purposeGrants});return!0})({tcfCustomVendors:e,tcfCustomPurposes:t,grants:a});n(s?"Sourcepoint custom vendors consent granted":"Sourcepoint custom vendors consent was not granted")})({tcfCustomVendors:i.tcfCustomVendors,tcfCustomPurposes:i.tcfCustomPurposes}),s=(({hostname:e,readCookie:t,processConsentChange:o,config:i,command:r,commandCallback:a})=>(s,c)=>{c&&(i.CMP===an.name?new Promise(((e,t)=>{r(a(e,t))})).then((r=>{n.logDebug(`Command callback returned: ${r}`),bn({hostname:e,readCookie:t,processConsentChange:o,config:i,tcData:s})})).catch((e=>n.logError(e))):bn({hostname:e,readCookie:t,processConsentChange:o,config:i,tcData:s}))})({hostname:e,readCookie:t,processConsentChange:o,config:i,command:vn,commandCallback:a}),c=(({readCookie:e,config:t,command:o,commandCallback:i})=>(r,a)=>{n.logDebug(`TCF addEventListener - ${r.eventStatus}`);const s=Boolean(t.cookieName&&e(document.cookie,t.cookieName)||r.tcString);r.eventStatus===rn.events.loaded&&a&&s?o(i):r.eventStatus===rn.events.complete&&a&&setTimeout((()=>{o(i)}),10)})({readCookie:t,config:i,command:Cn,commandCallback:s});(e=>{__tcfapi(rn.apiCommands.listener,2,e)})(c)};var En="utiq".concat(":1"),Tn="utiq".concat(":0"),Sn="consent.onetrust",Dn=function(e){var t,n,o,i,r=e.cookie,a=null,s=new URLSearchParams(r).get(on.groupsString),c=new URLSearchParams(r).get(on.vendorsString),l=null===(i=null===(o=null===(n=null===(t=window.Optanon)||void 0===t?void 0:t.GetDomainData)||void 0===n?void 0:n.call(t))||void 0===o?void 0:o.GeneralVendors)||void 0===i?void 0:i.find((function(e){return"Utiq vendor"===e.Name})),d=null==l?void 0:l.VendorCustomId;return(null==s?void 0:s.includes(En))&&(null==c?void 0:c.includes("".concat(d).concat(":1")))?a=!0:((null==s?void 0:s.includes(Tn))||(null==c?void 0:c.includes("".concat(d).concat(":0"))))&&(a=!1),{groups:(null==s?void 0:s.split(",").filter((function(e){return Boolean(e)})).join(","))||null,isConsentGranted:a}},In=function(e){var t=e.hostname,o=e.readCookie,i=e.processConsentChange,r=e.config,a=o(document.cookie,on.cookieName);n.logInfo("OptanonConsent - using OptanonConsent cookie with value: ",{cookie:a});var s=Boolean(window.Optanon)?0:200;setTimeout((function(){var e,n=a?Dn({cookie:a}):{groups:null,isConsentGranted:!1},o=n.groups,s=n.isConsentGranted;i(s,((e={})[t]={name:r.useGroups?on.groupsString:on.utiqString,value:r.useGroups?o:"optanonConsent=".concat(s),consentParsed:s?En:Tn,consentState:s?fn:gn},e))}),s)};const Un=({hostname:e,processConsentChange:t,config:o})=>{const i=JSON.parse(localStorage.getItem(o.localStorageKey))?.consents;if(!i)return void n.logError("Usercentrics - Consent value is not saved to local storage");const r=i[o.consentIndex].consentStatus;n.logDebug(`Processing UserCentrics consent value of ${r}...`),t(r,{[e]:{name:o.localStorageKey,value:`consents[${o.consentIndex}]`,consentParsed:r?dn:un,consentState:r?fn:gn}})},kn=(e=!1)=>{if(!0===e)return 0;const t=window.Utiq?.config?.connectionEligibilityRetryInterval;return 6e4*(Number.isInteger(t)&&t>=0?t:2)};var An=function(e){var t,o,i=null===(t=window.Utiq)||void 0===t?void 0:t.transactionId;if(i){var r=e.includes("?")?"&":"?";return"".concat(e).concat(r,"transactionId=").concat(i).concat((o=yt())?"&x-cryptip=".concat(o):"")}return n.logDebug("No transactionId found in Utiq namespace. Returning original URL..."),e},qn=function(e){var t,o,i,r,a=e.utiqHost,s=e.retryInterval,c=e.ignoreInterval,l=void 0!==c&&c,d=e.eligibilityCheckTrigger,u=void 0===d?"unspecified":d;return t=void 0,o=void 0,r=function(){var e,t,o,i,r,c,d,f,g,p,m,h,C,v;return function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(y){switch(y.label){case 0:if(e=JSON.parse(localStorage.getItem(Rt)),t=null==e?void 0:e.retryEligibilityCheckTime,!(l||!e||"number"==typeof t&&t<Date.now()))return[3,5];if(o=function(e){var t=e.split("://");if(!Array.isArray(t)||2!==t.length)return n.logError("Incorrect URI provided: ".concat(e)),{protocol:null,domain:null,path:null};var o=t[0],i=t[1].split("/");return Array.isArray(i)&&""!==i[0]?{protocol:o,domain:i[0],path:i[1]?i.slice(1).join("/"):null}:(n.logError("Incorrect URI provided: ".concat(e)),{protocol:o,domain:null,path:null})}("".concat(a,"/op/idconnect")),i=o.protocol,r=o.domain,c=o.path,d=e?"":"&initial=true",!i||!r||!c)return n.logError("Data missing from Utiq host - protocol: ".concat(i,", domain: ").concat(r,", path: ").concat(c)),[2,e];f=!1,g=An("".concat(i,"://").concat(r,"/").concat(c,"/mno-precheck?type=").concat(u).concat(d)),y.label=1;case 1:return y.trys.push([1,3,4,5]),[4,vt({method:"get",url:g,timeout:4e3})];case 2:return 200===(null==(p=y.sent())?void 0:p.status)&&"ok"===(null===(v=null==p?void 0:p.data)||void 0===v?void 0:v.status)&&(f=!0),[3,5];case 3:return m=y.sent(),n.logError(m),[3,5];case 4:return n.logInfo(f?"Successful mno-precheck call for an eligible connection...":"Failed mno-precheck call for not eligible connection..."),h=Number.isInteger(s)&&s>=0,C=h?s:12e4,e={isEligible:f,eligibilityCheckTime:Date.now(),retryEligibilityCheckTime:f?null:Date.now()+C},[7];case 5:return[2,e]}}))},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((r=r.apply(t,o||[])).next())}))};const Nn=({connectionEligibilityData:e,onEligibilityCheckedCallback:t})=>{"object"==typeof e&&e!=={}&&"boolean"==typeof e.isEligible&&(localStorage.setItem(Rt,JSON.stringify(e)),n.logInfo(`Written new ${Rt} local storage entry: ${JSON.stringify(e)}`),"function"==typeof t&&t(e.isEligible))},Rn=async({utiqHost:e,onEligibilityCheckedCallback:t,eligibilityCheckTrigger:o="unspecified",ignoreInterval:i=!1})=>{const r=await qn({utiqHost:e,retryInterval:kn(i),ignoreInterval:i,eligibilityCheckTrigger:o}),a=Boolean(r?.isEligible);return n.logDebug(`Eligibility check done. Connection eligible: ${a}`),Nn({connectionEligibilityData:r,onEligibilityCheckedCallback:t}),a},Pn=({payload:e,config:t,environment:o})=>{Object.keys(e).forEach((t=>{void 0!==e[t].value&&e[t].value||delete e[t]})),Object.keys(e).length<1?n.logError("Consent payload had no defined entries. Consent call will not be made."):(async({consentUrl:e,payload:t})=>{await vt({method:"post",url:e,data:t,withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:4e3}).catch((e=>{n.logError("Error occurred on idConnect consent call")}))})({consentUrl:An(`${t.utiqHost}${t.apiPath}`),payload:e}).then((()=>{const e=Et(document.cookie,Nt);"false"===e&&(async e=>{const t=An(`${e}/op/idconnect/data`);return(await vt({method:"get",url:t,withCredentials:!0,timeout:4e3}).catch((e=>{n.logError("Error occurred on data call: ",e)}))).status})(t.utiqHost).then((t=>{if(204===t)try{n.logInfo("Received clear signal from the API call. Clearing the Utiq data..."),en(e,o)}catch(e){n.logError(`Clearing Utiq data failed. Reason: ${e.message}`)}}))}))};var _n=function(e){var t=e.split("://"),n=t[0]||null,o=t[1]?t[1].split("/"):null;return{protocol:n,domain:o[0]||null,path:o[1]?o.slice(1).join("/"):null}},Ln=function(e,t){"function"==typeof e&&e(t)},xn={},Fn=function(e){var t=e.iFrameUrl,o=e.iFrameId,i=void 0===o?"GENERIC":o,r=e.isSrcDocUsed,a=void 0!==r&&r,s=e.suppressTransactionId;if(t){var c=void 0!==s&&s?t:An(t),l=a?"src":"srcdoc",d=i;xn[d]?(a?xn[d].srcdoc=t:xn[d].src=c,xn[d].removeAttribute(l)):xn[d]=function(e,t,n){if(document.body){var o=document.body.appendChild(document.createElement("div"));o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="1px",o.style.height="1px",o.style.display="none";var i=function(e,t,n){var o=document.createElement("iframe");return o.setAttribute("id",t),n?o.setAttribute("srcdoc","".concat(e)):o.setAttribute("src","".concat(e)),o.setAttribute("frameborder","0"),o.setAttribute("height","1"),o.setAttribute("width","1"),o}(e,t,n);return o.appendChild(i),i}}(a?t:c,i,a)}else n.logError("Missing iframe URL. Unable to create iFrame for ID ".concat(i))},jn=function(){var e={isEligible:!1,eligibilityCheckTime:Date.now(),retryEligibilityCheckTime:Date.now()+6048e5};Nn({connectionEligibilityData:e,onEligibilityCheckedCallback:function(e){return jt(Lt.onEligibilityChecked.name,_t.Utiq,{isEligible:e})}}),n.logError("Telco identification call failed. Identification will be checked again in 7 days...")},Gn=function(){var e=["https://service.test.utiq-aws.net","https://service.utiq.com"].includes(window.Utiq.config.customUtiqHost),t=_n(window.location.href).path;return e&&"pages/troubleshooting"===t},Mn=function(e,t){return!!(null==e?void 0:e.isTroubleShooting)&&(n.logDebug("troubleshooting flow detected on template handler ".concat(t,", no data will be returned")),jt(Lt.onFlowCompleted.name,_t.Utiq,{status:t}),!0)},Bn=Object.freeze({OK:200,Found:302,TemporaryRedirect:307}),Vn=Object.freeze({Stub:"stub",MspProxy:"mspProxy",UtiqCrossDomain:"utiqCrossDomain",Token:"token",Saml:"saml"}),Hn="Verify origin:",$n=function(e){var t=e.idConnectConfig,o=e.idConnectConfiguration,i=e.environment;return function(e){n.logDebug("Message is being handled");var r=o.IDCONNECT_DOMAIN_STORAGE_TRANSLATION&&o.IDCONNECT_DOMAIN_STORAGE_TRANSLATION[t.mnoSelectorDomain]?o.IDCONNECT_DOMAIN_STORAGE_TRANSLATION[t.mnoSelectorDomain]:t.mnoSelectorDomain;if(function(e){var t=e.origin,o=e.domain,i=e.mnoSelectorDomain,r=e.protocol,a=Boolean(t),s=window.location.origin===t,c=!!o&&"".concat(r,"://").concat(o)===t,l=!!i&&"".concat(r,"://").concat(i)===t;n.logDebug(Hn,"Origin ".concat(t," is defined -> ").concat(a)),n.logDebug(Hn,"Current domain to verify: ".concat(window.location.origin," -> ").concat(s)),n.logDebug(Hn,"IdConnect domain to verify: ".concat(o," -> ").concat(c)),n.logDebug(Hn,"MNO domain to verify: ".concat(i," -> ").concat(l));var d=a&&(s||c||l);return n.logDebug("Origin is verified - ".concat(d)),d}({origin:e.origin,domain:t.domain,mnoSelectorDomain:r,protocol:t.protocol}))if(null==e?void 0:e.data){var a;try{a=JSON.parse(e.data)}catch(e){return void n.logDebug("Error when parsing event message: ".concat(e))}if(a.msgType)switch(a.msgType){case"GETDATA":!function(e){var t=e.idConnectConfig,o=e.msg,i=e.idConnectConfiguration,r=e.environment;n.logDebug("Received data call message with ".concat(JSON.stringify(o))),"utiq"===i.IDCONNECT_TYPE?function(e){var t,o,i,r=e.idConnectConfig,a=e.msg,s=e.idConnectConfiguration,c=e.environment;if(n.logDebug("Received Utiq data call message with ".concat(JSON.stringify(a))),"DONE"!==a.status)return n.logDebug("Message status different than DONE. Status: ".concat(a.status)),void n.logDebug("Stopping the calls flow...");var l=a.body;if(l){var d=l.data;if(r.connectId=d,d&&!function(e,t){if(Array.isArray(null==e?void 0:e.consents))return!0;var n=$t(t.IDCONNECT_STORAGE_TYPE).get(t.IDCONNECT_DATA_STORAGE);return!!(n&&n.connectId&&Array.isArray(n.connectId.consents)&&n.connectId.consents.length>0&&n.connectId.consents[0].domain&&n.connectId.consents[0].name&&n.connectId.consents[0].value)}(d,s)&&"function"==typeof(null===(o=null===(t=window.Utiq)||void 0===t?void 0:t.functions)||void 0===o?void 0:o.dispatchConsentCall)&&window.Utiq.functions.dispatchConsentCall(),r.connectId.value||n.logDebug("connectId value is not present for data message handler..."),d&&!function(e,t){if(Array.isArray(null==e?void 0:e.idGraph))return!0;var n=$t(t.IDCONNECT_STORAGE_TYPE).get(t.IDCONNECT_DATA_STORAGE);return!!(n&&n.connectId&&Array.isArray(n.connectId.idGraph)&&n.connectId.idGraph.length>0&&n.connectId.idGraph[0].domain&&n.connectId.idGraph[0].mtid&&n.connectId.idGraph[0].atid)}(d,s)&&(null===(i=r.connectId)||void 0===i?void 0:i.value)){var u=((g=Gn())&&n.logDebug("troubleshooting service url detected, no data will be returned"),g?"&diagnostic=true":""),f="".concat(r.protocol,"://")+"".concat(r.domain,"/").concat(r.path,"/mno-selector")+"?d=".concat(new URL(s.IDCONNECT_API_HOST).hostname).concat(u);Fn({iFrameUrl:f,iFrameId:"MNOSELECTOR",environment:c})}else{var g;!function(e){var t={connectId:e.connectId,ids:{source:{connectId:e.connectId,domain:e.domain,umdid:e.umdid,originalUmdidCookie:e.originalUmdidCookie,dataOriginalUmdidCookie:e.dataOriginalUmdidCookie},target:{connectId:null,domain:null,umdid:null,umdidCookie:null}}};if(Array.isArray(e.connectId.idGraph))for(var n=0,o=e.connectId.idGraph;n<o.length;n++)void 0!==o[n].mtid&&(t.connectStatus="OK");Ln(e.callbackSuccess,t)}(r)}}else n.logDebug("Message body is not present. Terminating the flow...")}({idConnectConfig:t,msg:o,idConnectConfiguration:i,environment:r}):n.logWarn("Cannot call getDataMessageUtiq due to environment ".concat(r," and IDCONNECT_TYPE ").concat(i.IDCONNECT_TYPE," "))}({idConnectConfig:t,msg:a,idConnectConfiguration:o,environment:i});break;case"CONNECT":!function(e){var t,o,i=e.idConnectConfig,r=e.msg,a=e.event,s=e.idConnectConfiguration,c=e.environment;switch(n.logDebug("Received connect call message with ".concat(JSON.stringify(r))),r.status){case"SEND":var l={msgType:"CONNECT",status:"EXCHANGE",data:{transactionId:i.transactionId,connectId:i.connectId.value,connectDomain:i.connectId.domain,umdid:i.umdid}};a.source.postMessage(JSON.stringify(l),"*");break;case"NOUMDID":var d={connectId:i.connectId,ids:{source:{connectId:i.connectId,domain:i.domain,umdid:i.umdid,originalUmdidCookie:i.originalUmdidCookie,dataOriginalUmdidCookie:i.dataOriginalUmdidCookie},target:{connectId:null,domain:null,umdid:null,umdidCookie:null}},connectStatus:"NOUMDID"};Ln(i.callbackSuccess,d);break;case"DONE":if(c===_t.Utiq&&"NotCreated"===(null===(o=null===(t=null==r?void 0:r.body)||void 0===t?void 0:t.status)||void 0===o?void 0:o.StatusC1)){if(Mn(r,"error"))return;return void jn()}if(s.IDCONNECT_ALLOW_TOKEN_DATA_CALL&&s.IDCONNECT_ALLOW_TOKEN_DATA_CALL_COUNTER&&i.dataCallCounter<=s.IDCONNECT_ALLOW_TOKEN_DATA_CALL_COUNTER){i.dataCallCounter++;var u="".concat(i.protocol,"://").concat(i.domain,"/")+"".concat(i.path,"/data");Fn({iFrameUrl:u,iFrameId:"GETDATA",environment:c})}r.body.ids.source.originalUmdidCookie=i.originalUmdidCookie;var f={connectId:i.connectId,ids:r.body.ids,connectStatus:r.body.status.StatusC1};Ln(i.callbackSuccess,f);break;case"ERROR":if(c===_t.Utiq){if(Mn(r,"error"))return;jn()}break;case"NOLOCALSTORAGEACCESS":return;default:n.logError("Unsupported connect message status: ".concat(r.status,". Stopping the flow..."))}}({idConnectConfig:t,msg:a,event:e,idConnectConfiguration:o,environment:i});break;case"MNOSELECTOR":!function(e,t,o,i){var r;if(t.body)if(Array.isArray(o.IDCONNECT_ALLOWED_USE_CASES))if(o.IDCONNECT_ALLOWED_USE_CASES.includes(t.body.useCase))if(t.body.url)if(null===(r=e.connectId)||void 0===r?void 0:r.value)switch(e.useCase=t.body.useCase,e.mnoSelectorDomain=t.body.url.split("/")[2],e.useCase){case Vn.Stub:vt({method:"get",url:t.body.url,timeout:4e3}).then((function(t){if([Bn.OK,Bn.Found,Bn.TemporaryRedirect].includes(t.status)){e.token=t.data.token;var n=Gn()?"&diagnostic=true":"",o="".concat(e.protocol,"://").concat(e.mnoSelectorDomain,"/").concat(e.path)+"/tmi-stub?c=".concat(e.connectId.value)+"&token=".concat(e.token)+"&d=".concat(e.domain).concat(n);Fn({iFrameUrl:o,iFrameId:"UTIQSTUB",environment:i})}})).catch((function(e){n.logError("Error occurred on idConnect consent call")}));break;case Vn.MspProxy:case Vn.Saml:case Vn.UtiqCrossDomain:Fn({iFrameUrl:t.body.url,environment:i});break;case Vn.Token:Fn({iFrameUrl:t.body.url,iFrameId:"IDENT",environment:i});break;default:n.logError("Unsupported idConnect ".concat(e.useCase," use case provided"))}else n.logDebug("No connectId cookie value found on mno selector message handler. Terminating the flow...");else n.logDebug("No URL in message body. Terminating the flow...");else n.logDebug("MNO Use Case ".concat(t.body.useCase," not defined in IDCONNECT_ALLOWED_USE_CASES. Terminating the flow..."));else n.logDebug("IDCONNECT_ALLOWED_USE_CASES is not an array of strings. Terminating the flow...");else n.logDebug("Message body is not present. Terminating the flow...")}(t,a,o,i);break;case"SETCOOKIEDOMAIN":if(Mn(a,"setCookieDomain"))return;!function(e,t){void 0!==e.SetCookieDomain&&""!==e.SetCookieDomain&&Fn({iFrameUrl:wt(e.SetCookieDomain),iFrameId:"SetCookieDomain",environment:t})}(a,i);break;default:n.logWarn("Received unsupported message type ".concat(a.msgType))}else n.logDebug("Caught and discarded message with data, but empty message type: ".concat(a.msgType,"."))}else n.logDebug("Message event had no data");else n.logDebug("Origin does not include current or next best domain. Protocol:",t.protocol,"; domain:",t.domain,"Event origin:",e.origin)}},zn=function(e){var t,o=e.idConnectConfig,i=e.idConnectConfiguration,r=e.environment;if(!(null===(t=window.Utiq)||void 0===t?void 0:t.data).wereIdsDispatched){var a=zt(i);Mt(a,r)}n.logDebug("Initializing IDconnect promise handler...");var s=xt(r);return s&&(i.IDCONNECT_API_HOST="".concat(s,"/op/idconnect")),(e=>{window.Utiq||={},window.Utiq.API||={},window.Utiq.API.getIdGraphEntry=t=>function(e,t){var o=function(e,t){var o;if(!e)return{isSuccessful:!1,errorMessage:"Entry key (string) parameter is missing"};if(!t||0===Object.keys(t).length)return{isSuccessful:!1,errorMessage:"No configuration set up"};var i=$t(t.IDCONNECT_STORAGE_TYPE).get(t.IDCONNECT_DATA_STORAGE);if(!Array.isArray(null===(o=null==i?void 0:i.connectId)||void 0===o?void 0:o.idGraph))return{isSuccessful:!1,errorMessage:"No required IDC data present. Cannot extract the ID graph entry"};var r=i.connectId.idGraph[0];return r&&r[e]?("atid"===e&&n.logInfo("If you are running the Utiq Web SDK from iOS webview, soon ATT will be required to acquire the atid"),{isSuccessful:!0,data:r[e]}):{isSuccessful:!1,errorMessage:"Could not find an entry for provided entry name: ".concat(e)}}(e,t);return o.isSuccessful?o.data:o.errorMessage}(t,e),n.logDebug("ID Connect API functions initialized...")})(i),new Promise((function(e){var t=i.IDCONNECT_API_HOST,a=_n(t);o.dataCallCounter=0,o.protocol=a.protocol,o.domain=a.domain,o.path=a.path,n.logDebug("Initializing IDconnect callback success logic..."),n.logDebug("Calling ID Connect callbacks, listeners and data call initialization..."),function(e){var t=e.idConnectConfig,o=e.environment,i=e.callbackSuccess,r=e.idConnectConfiguration;(function(e){var t,n,o=$t(e.IDCONNECT_STORAGE_TYPE).get(e.IDCONNECT_DATA_STORAGE),i=$t(e.IDCONNECT_STORAGE_TYPE).get(e.IDCONNECT_DATA_STORAGE);return(null==i?void 0:i.umid)&&(null===(n=null===(t=null==o?void 0:o.ids)||void 0===t?void 0:t.target)||void 0===n?void 0:n.umdid)?Qt("".concat(o.ids.target.umdid,"|").concat(i.umid,"|1")):null})(r)||(n.logDebug("Setting initial ID Connect callbacks, listeners and data call"),t.callbackSuccess=i,void 0!==window.Utiq.idConnectMessageListener&&(n.logDebug("IDconnect data call listener already defined. Removing the listener..."),window.removeEventListener("message",window.Utiq.idConnectMessageListener)),"Utiq"===o&&"utiq"===r.IDCONNECT_TYPE&&(n.logDebug("Recreating IDconnect data call listener..."),window.Utiq.idConnectMessageListener=$n({idConnectConfig:t,idConnectConfiguration:r,environment:o}),n.logDebug("IDconnect data call listener recreated.")),function(){var e,t,o,i,r,a;n.logDebug("Checking if data call should be made...");var s=null===(a=null===(r=null===(i=null===(o=null===(t=null===(e=window.Utiq)||void 0===e?void 0:e.data)||void 0===t?void 0:t.clientConfig)||void 0===o?void 0:o.CALLS_CONFIG)||void 0===i?void 0:i.conditions)||void 0===r?void 0:r.timeConditions)||void 0===a?void 0:a.oncePerTimeInterval;if(!s)return n.logDebug("Interval setting is not present. Removing utiqDataCallTimestamp and making data call..."),localStorage.removeItem("utiqDataCallTimestamp"),!0;var c=Date.now(),l=JSON.parse(localStorage.getItem("utiqDataCallTimestamp"));return l?l&&l+parseInt(String(s),10)<c?(n.logDebug("Time interval passed. It should invoke data call and update utiqDataCallTimestamp time..."),!0):(n.logDebug("Local Storage timestamp found. Data call will not be made."),!1):(n.logDebug("Local Storage utiqDataCallTimestamp not found. Invoking data call..."),!0)}()&&(t.dataCallCounter++,n.logDebug("Adding IDconnect data call listener..."),window.addEventListener("message",window.Utiq.idConnectMessageListener,!1),n.logDebug("Making IDconnect data call..."),function(e,t){var o="".concat(e.protocol,"://")+"".concat(e.domain,"/")+"".concat(e.path,"/data");vt({method:"get",url:An(o),withCredentials:!0,timeout:4e3}).then((function(e){if(200===e.status)Fn({iFrameUrl:e.data,iFrameId:"GETDATA",isSrcDocUsed:!0,environment:t});else if(204===e.status)try{Gn()&&(n.logDebug("troubleshooting flow detected on template handler, should reload the flow"),jt(Lt.onFlowCompleted.name,_t.Utiq,{status:"reload"})),window.Utiq.API.handleDataClear()}catch(e){n.logError("handleDataClear API call failed. Reason: ".concat(e.message))}else n.logError("Unrecognised data response status ".concat(e.status))})).catch((function(e){n.logError("Error occurred on data call: ",e)}))}(t,o)))}({idConnectConfig:o,environment:r,callbackSuccess:function(t){var o=function(e){var t,o,i,r,a,s,c,l,d,u,f,g,p,m,h,C,v=e.data,y=e.idConnectConfiguration,w=e.environment,b=zt(y),O={connectId:{domain:v.connectId.domain,id:v.connectId.id,idGraph:v.connectId.idGraph||[],value:v.connectId.value,consents:v.connectId.consents||[]},connectStatus:v.connectStatus,ids:v.ids},E=y.IDCONNECT_DATA_STORAGE;if(n.logDebug("Updating graph data..."),$t(y.IDCONNECT_STORAGE_TYPE).set(E,O),n.logDebug("Set idConnect data under ".concat(E," at exact time of ").concat(Date.now(),".")),(null===(t=null==b?void 0:b[0])||void 0===t?void 0:t.mtid)!==(null===(r=null===(i=null===(o=null==v?void 0:v.connectId)||void 0===o?void 0:o.idGraph)||void 0===i?void 0:i[0])||void 0===r?void 0:r.mtid)&&Mt(v.connectId.idGraph,w),(null===(c=null===(s=null===(a=null==v?void 0:v.connectId)||void 0===a?void 0:a.idGraph)||void 0===s?void 0:s[0])||void 0===c?void 0:c.mtid)&&(null===(u=null===(d=null===(l=null==v?void 0:v.connectId)||void 0===l?void 0:l.idGraph)||void 0===d?void 0:d[0])||void 0===u?void 0:u.atid)){var T=JSON.parse(localStorage.getItem("utiqDataCallTimestamp")),S=null===(C=null===(h=null===(m=null===(p=null===(g=null===(f=window.Utiq)||void 0===f?void 0:f.data)||void 0===g?void 0:g.clientConfig)||void 0===p?void 0:p.CALLS_CONFIG)||void 0===m?void 0:m.conditions)||void 0===h?void 0:h.timeConditions)||void 0===C?void 0:C.oncePerTimeInterval,D=Date.now();T?T&&T+parseInt(String(S),10)<D?(localStorage.setItem("utiqDataCallTimestamp",String(D)),n.logDebug("Time interval passed. Updated utiqDataCallTimestamp time to ".concat(D,". Exact time of localStorage entry creation: ").concat(Date.now()))):n.logDebug("Local Storage utiqDataCallTimestamp found in localStorage with value ".concat(T)):(localStorage.setItem("utiqDataCallTimestamp",String(D)),n.logDebug("Local Storage utiqDataCallTimestamp not found. Created new timestamp as ".concat(D,". Exact time of localStorage entry creation: ").concat(Date.now())))}return!0}({data:t,idConnectConfiguration:i,environment:r});e(o)},idConnectConfiguration:i})}))},Wn={domain:null,path:null,protocol:null,callbackSuccess:null,connectId:null,umdid:null,originalUmdidCookie:null,dataUmdidCookie:null,token:null,net:null,dataCallCounter:0,version:"1.0.1"},Jn=function(e){var t=e.idConnectConfiguration,n=e.environment;return zn({idConnectConfig:Wn,idConnectConfiguration:t,environment:n})},Kn=function(e,t){return function(o,i){return r=void 0,a=void 0,c=function(){var r,a,s,c,l;return function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(d){switch(d.label){case 0:return n.logDebug("Consent is granted: ",o),r=Et(document.cookie,Nt),a=!r||o!==("true"===r),s=e.config,c=function(e){jt(Lt.onEligibilityChecked.name,_t.Utiq,{isEligible:e}),e||jt(Lt.onFlowCompleted.name,_t.Utiq)},(l=o&&a)?[4,Rn({utiqHost:s.utiqHost,onEligibilityCheckedCallback:c,eligibilityCheckTrigger:"consent_granted",ignoreInterval:!0})]:[3,2];case 1:l=!d.sent(),d.label=2;case 2:return l?(n.logWarn("Consent was granted, but service eligibility check failed for current connection type. Service will not be loaded."),[2]):(a&&(document.cookie=bt({name:Nt,value:Qt(o),days:180,domain:Zt(window.location.hostname)})),(({payload:e,config:t,environment:o})=>{try{window.Utiq=window.Utiq||{},window.Utiq.functions=window.Utiq.functions||{},window.Utiq.functions.dispatchConsentCall=()=>{n.logTrace(`Calling consent change with payload ${JSON.stringify(e)}`),Pn({payload:e,config:t,environment:o})}}catch(e){n.logWarn(`Error when calling consent listener callback: ${e}`)}})({payload:i,config:s,environment:t}),o?((e=>{const{CALLS_CONFIG:t,IDCONNECT_CONFIG:o}=window.Utiq?.data?.clientConfig||{};if("object"==typeof t&&0!==Object.keys(t).length&&"object"==typeof o&&0!==Object.keys(o).length)n.logInfo("Client configuration detected in data layer. Loading the detected configuration..."),n.logDebug(`Client calls configuration from data layer: ${JSON.stringify(t)}`),n.logDebug(`Client fc configuration from data layer: ${JSON.stringify(o)}`);else{const t={IDCONNECT_API_HOST:`${e}/op/idconnect`,IDCONNECT_DATA_STORAGE:"utiqPass",IDCONNECT_DOMAIN_STORAGE_TRANSLATION:{"mobile-token.telekom.de":"tmi.telekom.de"},IDCONNECT_STORAGE_TYPE:"localStorage",IDCONNECT_TYPE:"utiq",IDCONNECT_ALLOWED_USE_CASES:["token","stub","utiqCrossDomain","mspProxy","saml"],IDCONNECT_ALLOW_TOKEN_DATA_CALL:!0,IDCONNECT_ALLOW_TOKEN_DATA_CALL_COUNTER:1},o={intervalId:null,conditions:{timeConditions:{oncePerSession:!1,oncePerTimeInterval:6e5},oncePerPage:!1,urls:null},callsToMake:{idConnect:!0},callsPerPage:{idConnect:!1}};window.Utiq||={},window.Utiq.data||={},window.Utiq.data.clientConfig={CALLS_CONFIG:o,IDCONNECT_CONFIG:t},window.IDCONNECT_CONFIG=t,n.logDebug(`Loaded new client configuration: ${JSON.stringify(t)}`)}})(s.utiqHost),function(e){var t,n,o,i,r=e.idConnectConfiguration,a=e.environment;t=this,n=void 0,i=function(){return function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){switch(e.label){case 0:return[4,Jn({idConnectConfiguration:r,environment:a})];case 1:return e.sent(),[2]}}))},new((o=void 0)||(o=Promise))((function(e,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}c((i=i.apply(t,n||[])).next())}))}({idConnectConfiguration:e.data.clientConfig.IDCONNECT_CONFIG,environment:t}),a||n.logDebug("No change with consent. Stopping the flow..."),window.Utiq.data.alreadyRevoked&&(window.Utiq.data.alreadyRevoked=!1)):(n.logInfo("Consent is currently rejected. Clearing the Utiq data..."),Xt(),a?e.isInitialPageLoad||(n.logTrace("Calling consent change with payload ".concat(JSON.stringify(i))),Pn({payload:i,config:s,environment:t})):n.logDebug("No change with consent. Stopping the flow..."),jt(Lt.onFlowCompleted.name,_t.Utiq)),a&&jt(Lt.onConsentUpdateFinished.name,_t.Utiq,{isConsentGranted:o}),e.isInitialPageLoad&&(e.isInitialPageLoad=!1),[2])}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(n,o)}i((c=c.apply(r,a||[])).next())}));var r,a,s,c}},Yn=function(e){var t,o,i,r,a=e.utiqConsentStatusCookie,s=e.environment,c=e.utiqHost,l=e.isLocalEnvironment,d=e.customUtiqHost;return t=void 0,o=void 0,r=function(){var e,t,o;return function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(i){switch(i.label){case 0:return"false"!==a?[3,1]:(en(a,s),[3,3]);case 1:return[4,Rn({utiqHost:c,onEligibilityCheckedCallback:function(e){jt(Lt.onEligibilityChecked.name,_t.Utiq,{isEligible:e}),e||jt(Lt.onFlowCompleted.name,_t.Utiq)},eligibilityCheckTrigger:"load"})];case 2:if(!i.sent())return[2];i.label=3;case 3:return(e=>{const t=Pt(e.toLowerCase());window.Utiq||={},window.Utiq.API||={},window.Utiq.API.setVerboseLoggingLevel=()=>{const e=Et(document.cookie,t);!!e&&"verbose"===e||(document.cookie=bt({name:t,value:Qt("verbose"),days:90})),n.logInfo("Verbose logging level has been set"),n.setLogLevel(n.logLevels.verbose)},window.Utiq.API.resetLoggingLevel=()=>{const e=Et(document.cookie,t);!!e&&"verbose"===e&&(document.cookie=bt({name:t,value:Qt("info"),days:0})),n.setLogLevel(n.logLevels.info),n.logInfo("Logging level has been reset to info level")},n.logDebug(`${e} logging API functions initialized...`)})(s),e=(()=>{window.Utiq=window.Utiq||{};const{Utiq:e}=window;return e.functions=e.functions||{},e.config=e.config||{},e.isInitialPageLoad=!0,e})(),(({isOtherConsentManagementPlatformSet:e,isLocalEnvironment:t,utiqHost:o})=>{e||(document.getElementById("utiq__consent-manager")?n.logDebug("Utiq consent manager is already loaded on the page. Proceeding..."):Wt(t,o))})({isOtherConsentManagementPlatformSet:Boolean(e.config.CMP),isLocalEnvironment:l,utiqHost:c}),function(e,t){var n={utiqHost:e,apiPath:"/op/idconnect/consent",oncePerSession:!1,oncePerTimeInterval:null},o=t.config,i=(o.listeners,function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}(o,["listeners"])),r=Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt({},i.customUtiqHost&&{customUtiqHost:i.customUtiqHost}),i.CMP&&{CMP:i.CMP}),i.customizationOptions&&{customizationOptions:i.customizationOptions}),i.language&&{language:i.language}),i.consentManagerOrigin&&{consentManagerOrigin:i.consentManagerOrigin}),i.consentManagerDataLayer&&{consentManagerDataLayer:i.consentManagerDataLayer}),i.useGroups&&{useGroups:i.useGroups}),i.OptanonDelay&&{OptanonDelay:i.OptanonDelay}),i.tcfPurposes&&{tcfPurposes:i.tcfPurposes}),i.tcfVendors&&{tcfVendors:i.tcfVendors}),i.tcfApiMaxDelay&&{tcfApiMaxDelay:i.tcfApiMaxDelay}),i.tcfApiTimeStep&&{tcfApiTimeStep:i.tcfApiTimeStep}),i.tcfCustomPurposes&&{tcfCustomPurposes:i.tcfCustomPurposes}),i.tcfCustomVendors&&{tcfCustomVendors:i.tcfCustomVendors}),i.localStorageKey&&{localStorageKey:i.localStorageKey}),i.consentIndex&&{consentIndex:i.consentIndex}),i.didomiUtiqPurposeId&&{didomiUtiqPurposeId:i.didomiUtiqPurposeId}),i.didomiUtiqVendorId&&{didomiUtiqVendorId:i.didomiUtiqVendorId});t.config=Jt(Jt({},n),r),t.config.oncePerTimeInterval="number"==typeof t.config.oncePerTimeInterval?t.config.oncePerTimeInterval:0}(c,e),t=function(){return function(e,t){if(document.getElementById("utiq__revocation-popup")&&"function"==typeof window.Utiq.API.showRevocationPopupWindow)return n.logDebug("Utiq revocation popup is already loaded on the page. Proceeding..."),void window.Utiq.API.showRevocationPopupWindow();var o=document.createElement("script");o.setAttribute("id","utiq__revocation-popup"),n.logTrace("Calling for consent manager origin with params isLocalEnvironment: ".concat(e," and utiqHost: ").concat(t,"..."));var i=e?window.location.origin:t;n.logDebug("Setting revocation popup from origin ".concat(i,"...")),o.src="".concat(i,"/revocationPopup.js"),document.head.appendChild(o),n.logDebug("Revocation popup appended to the document head")}(l,c)},((e,t)=>{window.Utiq||={},window.Utiq.API||={},window.Utiq.API.handleConsentChange=e=>{"boolean"==typeof e?jt(Lt.onConsentChanging.name,_t.Utiq,{isConsentGranted:e}):n.logError(`Incorrect consent value provided for Utiq handleConsentChange: ${e}`)},window.Utiq.API.addDidomiEventListener=()=>{window.didomiEventListeners||=[],window.didomiEventListeners.push({event:"consent.changed",listener:function(e){jt(Lt.onDidomiConsentChanged.name,_t.Utiq)}})},window.Utiq.API.handleDataClear=()=>{const t=Et(Nt);en(t,e)},window.Utiq.API.getUtiqConsentStatus=()=>{const e=Et(document.cookie,Nt);if(e)return"true"===e},window.Utiq.API.revokeConsentWithPopup=()=>{const e=t,o=Et(document.cookie,Nt);if(o&&"false"!==o){const t=({isConsentGranted:o})=>{o?n.logDebug("Consent was revoked, but consent update event finished with consent granted. Revocation popup showing is being stopped..."):e(),window.Utiq?.listeners?.onConsentUpdateFinished&&(window.Utiq.listeners.onConsentUpdateFinished=window.Utiq.listeners.onConsentUpdateFinished.filter((e=>e!==t)))};window.Utiq||={},window.Utiq.listeners||={},window.Utiq.listeners.onConsentUpdateFinished||=[],window.Utiq.listeners.onConsentUpdateFinished.push(t),jt(Lt.onConsentChanging.name,_t.Utiq,{isConsentGranted:!1})}else window.Utiq.data.alreadyRevoked||(window.Utiq.data.alreadyRevoked=!0),e()},n.logDebug("Utiq functions initialized...")})(s,t),o=((e,t)=>{if(t){const[,e]=t.split("://");if(e)return n.logDebug(`Returning hostname from the customUtiqHost config entry: ${e}...`),e}const o=e?`utiq-test.${location.hostname}`:location.hostname;return n.logDebug(`Returning extracted hostname: ${o}...`),o})(l,d),(({hostname:e,processConsentChange:t,readCookie:o,config:i})=>{if(i)switch(i.CMP){case on.name:const{isValid:r}=Ft({fieldsTemplate:on.fieldsTemplate,validationTargetObject:i,logIdentificator:on.name});r&&function(e){var t,o,i,r=e.hostname,a=e.readCookie,s=e.processConsentChange,c=e.config;In({hostname:r,readCookie:a,processConsentChange:s,config:c}),window.addEventListener(Sn,(function(){n.logDebug("".concat(Sn," was dispatched"));var e=a(document.cookie,on.cookieName),t=Boolean(window.Optanon)?0:200;setTimeout((function(){(e?Dn({cookie:e}):{isConsentGranted:null}).isConsentGranted!==("true"===Et(document.cookie,Nt))&&In({hostname:r,readCookie:a,processConsentChange:s,config:c})}),t)})),window.Utiq||(window.Utiq={}),(t=window.Utiq).listeners||(t.listeners={}),(o=window.Utiq.listeners).onConsentChanging||(o.onConsentChanging=[]),window.Utiq.listeners.onConsentChanging.push((function(e){var t=e.isConsentGranted;n.logDebug("Synchronizing Optanon consent with consent value:",t);var o=Boolean(window.Optanon)?0:200;setTimeout((function(){var e;(null===(e=window.Optanon)||void 0===e?void 0:e.UpdateConsent)&&(t?window.Optanon.UpdateConsent("Category",En):window.Optanon.UpdateConsent("Category",Tn)),n.logDebug("Processing consent from onConsentChanging event with consent value:",t),In({hostname:r,readCookie:a,processConsentChange:s,config:c})}),o)})),(i=window.Utiq.listeners).onConsentUpdateFinished||(i.onConsentUpdateFinished=[]),window.Utiq.listeners.onConsentUpdateFinished.push((function(e){var t=e.isConsentGranted;n.logDebug("Synchronizing Optanon consent with consent value:",t);var o=Boolean(window.Optanon)?0:200;setTimeout((function(){var e,n,o,i,r,a=null===(i=null===(o=null===(n=null===(e=window.Optanon)||void 0===e?void 0:e.GetDomainData)||void 0===n?void 0:n.call(e))||void 0===o?void 0:o.GeneralVendors)||void 0===i?void 0:i.find((function(e){return"Utiq vendor"===e.Name})),s=null==a?void 0:a.VendorCustomId;(null===(r=window.Optanon)||void 0===r?void 0:r.UpdateConsent)&&s&&(t?(window.Optanon.UpdateConsent("Category",En),window.Optanon.UpdateConsent("General Vendor","".concat(s,":1"))):(window.Optanon.UpdateConsent("Category",Tn),window.Optanon.UpdateConsent("General Vendor","".concat(s,":0"))))}),o)}))}({hostname:e,processConsentChange:t,readCookie:o,config:i});break;case rn.name:const{isValid:a}=Ft({fieldsTemplate:rn.fieldsTemplate,validationTargetObject:i,logIdentificator:rn.name});a&&On({hostname:e,processConsentChange:t,readCookie:o,config:i});break;case an.name:const{isValid:s}=Ft({fieldsTemplate:an.fieldsTemplate,validationTargetObject:i,logIdentificator:an.name});s&&On({hostname:e,processConsentChange:t,readCookie:o,config:i});break;case sn.name:const{isValid:c}=Ft({fieldsTemplate:sn.fieldsTemplate,validationTargetObject:i,logIdentificator:sn.name});c&&(({hostname:e,processConsentChange:t,config:n})=>{window.addEventListener(sn.event.type,(o=>{o.event===sn.event.name&&Un({hostname:e,processConsentChange:t,config:n})})),Un({hostname:e,processConsentChange:t,config:n})})({hostname:e,processConsentChange:t,config:i});break;case cn.name:const{isValid:l}=Ft({fieldsTemplate:cn.fieldsTemplate,validationTargetObject:i,logIdentificator:cn.name});l&&function(e){var t=e.hostname,o=e.processConsentChange,i=e.config;mn({hostname:t,processConsentChange:o,config:i}),window.didomiEventListeners||(window.didomiEventListeners=[]),window.didomiEventListeners.push({event:"consent.changed",listener:function(e){"click"===(null==e?void 0:e.action)&&(n.logDebug("Processing consent from Didomi consent change event"),mn({hostname:t,processConsentChange:o,config:i}))}}),window.Utiq=window.Utiq||{},window.Utiq.listeners=window.Utiq.listeners||{},window.Utiq.listeners.onConsentChanging=window.Utiq.listeners.onConsentChanging||[],window.Utiq.listeners.onConsentChanging.push((function(e){var r=e.isConsentGranted;n.logDebug("Synchronizing Didomi consent with consent value:",r),hn(r,i.didomiUtiqPurposeId,i.didomiUtiqVendorId),n.logDebug("Processing consent from onConsentChanging event with consent value:",r),mn({hostname:t,processConsentChange:o,config:i})})),window.Utiq.listeners.onConsentUpdateFinished=window.Utiq.listeners.onConsentUpdateFinished||[],window.Utiq.listeners.onConsentUpdateFinished.push((function(e){var t=e.isConsentGranted;n.logDebug("Synchronizing Didomi consent with consent value:",t),hn(t,i.didomiUtiqPurposeId,i.didomiUtiqVendorId)}))}({hostname:e,processConsentChange:t,config:i});break;case"custom":i.CMPcustom();break;default:const{isValid:d}=Ft({fieldsTemplate:ln.fieldsTemplate,validationTargetObject:i,logIdentificator:ln.name});d&&(({hostname:e,processConsentChange:t,getValidatedBase64Cookie:n})=>{window.Utiq=window.Utiq||{},window.Utiq.listeners=window.Utiq.listeners||{},window.Utiq.listeners.onConsentChanging=window.Utiq.listeners.onConsentChanging||[],window.Utiq.listeners.onConsentChanging.push((({isConsentGranted:n})=>{pn({hostname:e,processConsentChange:t,isConsentGranted:n})}));const o=n(document.cookie,Nt);o&&pn({hostname:e,processConsentChange:t,isConsentGranted:"true"===o})})({hostname:e,processConsentChange:t,getValidatedBase64Cookie:Et})}else n.logError("No config provided in Utiq loader object")})({hostname:o,processConsentChange:Kn(e,s),readCookie:Ot,config:e.config}),jt(Lt.onInitialised.name,_t.Utiq),n.logInfo("Utiq library loaded..."),[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((r=r.apply(t,o||[])).next())}))};(async()=>{const e=_t.Utiq;n.initialize(e,Et(document.cookie,Pt(e.toLowerCase())));const t=window.location.origin.includes("http://")&&window.location.origin.includes(":8080"),o=xt(_t.Utiq),i=((e,t)=>{if(t)return n.logDebug(`Returning utiqHost from the customUtiqHost config entry: ${t}...`),t;const o=window.location.host.split(".");o.length>2&&o.shift(),window.location.origin.includes("//utiq-test.")||e?o.unshift("utiq-test"):window.IDCONNECT_CONFIG?.IDCONNECT_API_HOST&&"string"==typeof window.IDCONNECT_CONFIG?.IDCONNECT_API_HOST&&0===window.IDCONNECT_CONFIG?.IDCONNECT_API_HOST.indexOf("https://tmi.")?o.unshift("tmi"):o.unshift("utiq");const i=`https://${o.join(".").replace(":8080","")}`;return n.logDebug(`Returning utiqHost ${i}...`),i})(t,o);var r;(r=new URLSearchParams(window.location.search).get("utiq_stub"))&&("false"===r?localStorage.removeItem("utiqStub"):localStorage.setItem("utiqStub",r)),(r||yt())&&localStorage.removeItem("utiqEligibility"),n.logDebug("Setting Axios calls interceptors..."),vt.interceptors.request.use((e=>(n.logTrace(`Calling url ${e.url} with data:`,e.data),e)),(e=>(n.logError("Error occurred when setting up a request:",e.message),Promise.reject(e)))),vt.interceptors.response.use((e=>(n.logTrace(`Response from ${e.config.url} with data:`,e.data,"and status",e.status),e)),(e=>(e.response?n.logTrace("Call for",e.response.config.url,"failed with response status",e.response.status,"and reason:",e.response.data):e.request?n.logError("No response received for a call: ",e.request):n.logError("General error occurred: ",e.message),Promise.reject(e)))),n.logDebug("Finished setting Axios calls interceptors.");const a=Et(document.cookie,Nt),s=window.Utiq?.config?.listeners;((e,t)=>{if("string"!=typeof e||!Object.keys(_t).includes(e))return void n.logDebug(`No environment with a name "${e}" found. Cannot register event listeners for it.`);if(!t||"object"!=typeof t||0===Object.keys(t).length)return void n.logDebug(`No listeners to register for listeners object: ${t}`);window.Utiq||={},window.Utiq.listeners||={};const o=Lt;Object.entries(t).forEach((([e,t])=>{Object.keys(o).includes(e)?"function"==typeof t?(window.Utiq.listeners[o[e].name]||=[],window.Utiq.listeners[o[e].name].push(t)):Array.isArray(t)?t.forEach((t=>{"function"==typeof t?(window.Utiq.listeners[o[e].name]||=[],window.Utiq.listeners[o[e].name].push(t)):n.logWarn(`Listener callback from provided callbacks array for event with name ${e} was not a function. Cannot register this listener. Skipping...`)})):n.logWarn(`Listener for event with name ${e} was not a function, nor an array of functions. Cannot register this listener. Skipping...`):n.logInfo(`Event with name ${e} was not recognized. Cannot register this listener. Skipping...`)}))})(_t.Utiq,s),function(e,t){if("true"===e){var n=JSON.parse(localStorage.getItem("utiqDataCallTimestamp"));if(n&&n+6e5>Date.now()){var o=zt({IDCONNECT_STORAGE_TYPE:"localStorage",IDCONNECT_DATA_STORAGE:"utiqPass"});Mt(o,t)}}}(a,e),(()=>{window.Utiq||={};let e=window.Utiq?.transactionId;e||(n.logDebug("No transaction ID present. Creating"),e=qt(),n.logDebug(`New transactionId: ${e}`)),window.Utiq||={},window.Utiq.transactionId=e})();const c="Didomi"===window.Utiq?.config?.CMP;if("Optanon"===window.Utiq?.config?.CMP&&""===a){const r=Ot(document.cookie,on.cookieName),s=Boolean(window.Optanon)?0:200;setTimeout((()=>{const{isConsentGranted:s}=r?Dn({cookie:r}):{isConsentGranted:null};if(!1===s&&en(a,e),!0===s)Yn({utiqConsentStatusCookie:a,environment:e,utiqHost:i,isLocalEnvironment:t,customUtiqHost:o});else{const r=()=>{n.logDebug("Optanon.OnConsentChanged was dispatched");const s=Ot(document.cookie,on.cookieName),c=Boolean(window.Optanon)?0:200;setTimeout((()=>{const{isConsentGranted:n}=s?Dn({cookie:s}):{isConsentGranted:null};"true"===Et(document.cookie,Nt)!==n&&(!1===n?en(a,e):!0===n&&Yn({utiqConsentStatusCookie:a,environment:e,utiqHost:i,isLocalEnvironment:t,customUtiqHost:o})),window.removeEventListener(Sn,r)}),c)};window.addEventListener(Sn,r)}}),s)}else c&&""===a?(window.didomiOnReady||=[],window.didomiOnReady.push((async r=>{const s=r.getUserConsentStatusForPurpose(window.Utiq?.config?.didomiUtiqPurposeId),c=r.getUserConsentStatusForVendor(window.Utiq?.config?.didomiUtiqVendorId);if(!1!==s&&!1!==c||en(a,e),!0===s&&!0===c)await Yn({utiqConsentStatusCookie:a,environment:e,utiqHost:i,isLocalEnvironment:t,customUtiqHost:o});else{let s=!1;window.didomiEventListeners||=[],window.didomiEventListeners.push({event:"consent.changed",listener:function(c){if("click"===c?.action&&!s){n.logDebug("Main Didomi consent processing from consent change event started...");const c=r.getUserConsentStatusForPurpose(window.Utiq?.config?.didomiUtiqPurposeId),l=r.getUserConsentStatusForVendor(window.Utiq?.config?.didomiUtiqVendorId);!1===c||!1===l?en(a,e):!0===c&&!0===l&&(Yn({utiqConsentStatusCookie:a,environment:e,utiqHost:i,isLocalEnvironment:t,customUtiqHost:o}),s=!0)}}})}}))):await Yn({utiqConsentStatusCookie:a,environment:e,utiqHost:i,isLocalEnvironment:t,customUtiqHost:o})})()})();