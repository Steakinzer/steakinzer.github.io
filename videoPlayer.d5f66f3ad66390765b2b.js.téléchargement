/*! For license information please see videoPlayer.d5f66f3ad66390765b2b.js.LICENSE.txt */
(()=>{var e={34153:(e,t,i)=>{var n,o=void 0!==i.g?i.g:"undefined"!=typeof window?window:{},r=i(43558);"undefined"!=typeof document?n=document:(n=o["__GLOBAL_DOCUMENT_CACHE@4"])||(n=o["__GLOBAL_DOCUMENT_CACHE@4"]=r),e.exports=n},53257:(e,t,i)=>{var n;n="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},e.exports=n},43558:()=>{}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(53257),t=i.n(e),n=i(34153),o=i.n(n);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r.apply(this,arguments)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=["catalogSearch","catalogSequence"],l=["applicationId","catalogSearch","catalogSequence","playlistId","playlistVideoId","videoId"],d=function(e){return Object.keys(e).filter((function(e){return-1!==l.indexOf(e)})).reduce((function(t,i){var n=function(e,t){if(e&&void 0!==e[t]){if("string"!=typeof e[t]&&-1!==a.indexOf(t))try{return encodeURIComponent(JSON.stringify(e[t]))}catch(e){return}return encodeURIComponent(String(e[t]).trim())||void 0}}(e,i);return void 0!==n&&(t+=t?"&":"?",t+=encodeURIComponent(i)+"="+n),t}),"")},c=function(e){var t=e.accountId,i=e.base,n=void 0===i?"https://players.brightcove.net":i,o=e.playerId,r=void 0===o?"default":o,a=e.embedId,l=void 0===a?"default":a,c=e.iframe,p=void 0!==c&&c,u=e.minified,y=void 0===u||u,h=e.queryParams,m=void 0===h?null:h,v="";p?v+="html":(y&&(v+="min."),v+="js"),"/"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1));var f="";return p&&m&&"object"===(void 0===m?"undefined":s(m))&&(f=d(m)),n+"/"+(t=encodeURIComponent(t))+"/"+(r=encodeURIComponent(r))+"_"+(l=encodeURIComponent(l))+"/index."+v+f};c.VERSION="1.1.1";var p={embedId:"default",embedType:"in-page",playerId:"default",Promise:t().Promise,refNodeInsert:"append"},u="video",y="video-js",h="in-page",m="iframe",v="append",f="prepend",g="before",b="after",_="replace",E=["catalogSearch","catalogSequence"],S="https://players.brightcove.net/",C=function(e){if(e.playerUrl)return e.playerUrl;var t=e.accountId,i=e.playerId,n=e.embedId,o=e.embedOptions,r=e.embedType===m;return c({accountId:t,playerId:i,embedId:n,iframe:r,base:S,minified:!o||!o.unminified,queryParams:e})},I=function(){return S},w=function(e){S=e},L=function(e){return Boolean(e&&1===e.nodeType)},T=function(e){return Boolean(L(e)&&e.parentNode)},P=function(e,t,i){return t?function(e,t){if(!e.pip)return t;var i=o().createElement("div");return i.classList.add("vjs-pip-container"),i.appendChild(t),i}(t,function(e,t,i){if(!t.responsive)return i;i.style.position="absolute",i.style.top="0px",i.style.right="0px",i.style.bottom="0px",i.style.left="0px",i.style.width="100%",i.style.height="100%";var n=r({aspectRatio:"16:9",iframeHorizontalPlaylist:!1,maxWidth:"100%"},t.responsive),s=n.aspectRatio.split(":").map(Number),a=o().createElement("div"),l=s[1]/s[0]*100;e===m&&n.iframeHorizontalPlaylist&&(l*=1.25),a.style.paddingTop=l+"%",a.appendChild(i);var d=o().createElement("div");return d.style.position="relative",d.style.display="block",d.style.maxWidth=n.maxWidth,d.appendChild(a),d}(e,t,i)):i},B=function(e){var t=e.embedType===m?function(e){var t=o().createElement("iframe");return t.setAttribute("allow","autoplay;encrypted-media;fullscreen"),t.setAttribute("allowfullscreen","allowfullscreen"),t.src=C(e),t}(e):function(e){var t=e.embedOptions,i={applicationId:"data-application-id",catalogSearch:"data-catalog-search",catalogSequence:"data-catalog-sequence",playlistId:"data-playlist-id",playlistVideoId:"data-playlist-video-id",videoId:"data-video-id"},n=t&&t.tagName||y,r=o().createElement(n);return Object.keys(i).filter((function(t){return e[t]})).forEach((function(t){var n;if("string"!=typeof e[t]&&-1!==E.indexOf(t))try{n=JSON.stringify(e[t])}catch(e){return}else n=String(e[t]).trim();r.setAttribute(i[t],n)})),r.setAttribute("controls","controls"),r.classList.add("video-js"),r}(e);return function(e,t){var i=e.refNode,n=e.refNodeInsert,r=i.parentNode,s=P(e.embedType,e.embedOptions,t);if(n===g?r.insertBefore(s,i):n===b?r.insertBefore(s,i.nextElementSibling||null):n===_?r.replaceChild(s,i):n===f?i.insertBefore(s,i.firstChild||null):i.appendChild(s),e.embedOptions&&e.embedOptions.playlist){var a=e.embedOptions.playlist.legacy?"ul":"div",l=o().createElement(a);l.classList.add("vjs-playlist"),t.parentNode.insertBefore(l,t.nextElementSibling||null)}return e.refNode=null,t}(e,function(e,t){if("function"!=typeof e.onEmbedCreated)return t;var i=e.onEmbedCreated(t);return L(i)?i:t}(e,t))},M=new(t().Map),q=function(e){return(e.accountId||"*")+"_"+e.playerId+"_"+e.embedId},x=function(){M.clear()},O=function(e){M.forEach(e)},N=function(e){return M.has(q(e))},j=function(e){M.set(q(e),e.accountId?C(e):"")},A=/^([A-Za-z0-9]+)_([A-Za-z0-9]+)$/,R=function(){return t().bc?Object.keys(t().bc).filter((function(e){return A.test(e)})):[]},k=function(e){e&&Object.keys(e.players).forEach((function(t){var i=e.players[t];i&&i.dispose()}))},H=function(){O((function(e,t){e&&Array.prototype.slice.call(o().querySelectorAll('script[src="'+e+'"]')).forEach((function(e){return e.parentNode.removeChild(e)}))})),x(),k(t().videojs),R().forEach((function(e){return k(t().bc[e].videojs)})),Object.keys(t()).filter((function(e){return/^videojs/i.test(e)||/^(bc)$/.test(e)})).forEach((function(e){delete t()[e]}))};(function(){R().forEach((function(e){var t=e.match(A),i={playerId:t[1],embedId:t[2]};N(i)||j(i)}))})();var D=function(e){return"function"==typeof e},$=function(e){var t,i=e.accountId,n=e.embedOptions,o=e.embedType,r=e.options,s=e.refNode,a=e.refNodeInsert;if(!i)throw new Error("accountId is required");if(!T(s))throw new Error("refNode must resolve to a node attached to the DOM");if(!function(e){return e===h||e===m}(o))throw new Error("embedType is missing or invalid");if(o===m&&r)throw new Error("cannot use options with an iframe embed");if(n&&void 0!==n.tagName&&((t=n.tagName)!==y&&t!==u))throw new Error('embedOptions.tagName is invalid (value: "'+n.tagName+'")');if(n&&n.responsive&&n.responsive.aspectRatio&&!/^\d+\:\d+$/.test(n.responsive.aspectRatio))throw new Error('embedOptions.responsive.aspectRatio must be in the "n:n" format (value: "'+n.responsive.aspectRatio+'")');if(!function(e){return e===v||e===f||e===g||e===b||e===_}(a))throw new Error("refNodeInsert is missing or invalid")},V=function(e,i,n,o){var r,s=e.embedId,a=e.playerId,l=t().bc[a+"_"+s]||t().bc;if(!l)return o(new Error("missing bc function for "+a));j(e);try{(r=l(i,e.options)).bcinfo&&(r.bcinfo.PLAYER_LOADER=!0)}catch(t){var d="Could not initialize the Brightcove Player.";return e.embedOptions.tagName===y&&(d+=' You are attempting to embed using a "video-js" element. Please ensure that your Player is v6.11.0 or newer in order to support this embed type. Alternatively, pass `"video"` for `embedOptions.tagName`.'),o(new Error(d))}n({type:h,ref:r})},U=function(e,t,i){e.refNode=function(e){return T(e)?e:"string"==typeof e?o().querySelector(e):null}(e.refNode),$(e);var n=e.refNode,r=e.refNodeInsert,s=n.parentNode,a=B(e);if(e.embedType!==m){if(N(e))return V(e,a,t,i);var l=o().createElement("script");l.onload=function(){return V(e,a,t,i)},l.onerror=function(){i(new Error("player script could not be downloaded"))},l.async=!0,l.charset="utf-8",l.src=C(e),r===_?s.appendChild(l):n.appendChild(l)}else t({type:m,ref:a})},F=function(e){var t=r({},p,e),i=t.Promise,n=t.onSuccess,o=t.onFailure;return!D(i)||D(n)||D(o)?U(t,D(n)?n:function(){},D(o)?o:function(e){throw e}):new i((function(e,i){return U(t,e,i)}))},z=function(e,t){Object.defineProperty(F,e,{configurable:!1,enumerable:!0,value:t,writable:!1})};z("getBaseUrl",(function(){return I()})),z("setBaseUrl",(function(e){w(e)})),z("getUrl",(function(e){return C(e)})),z("reset",(function(){return H()})),[["EMBED_TAG_NAME_VIDEO",u],["EMBED_TAG_NAME_VIDEOJS",y],["EMBED_TYPE_IN_PAGE",h],["EMBED_TYPE_IFRAME",m],["REF_NODE_INSERT_APPEND",v],["REF_NODE_INSERT_PREPEND",f],["REF_NODE_INSERT_BEFORE",g],["REF_NODE_INSERT_AFTER",b],["REF_NODE_INSERT_REPLACE",_],["VERSION","1.6.0"]].forEach((function(e){z(e[0],e[1])}));const G=F;window.didomiConsent=function(e,t){window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(i){void 0!==typeof i&&i.getObservableOnUserConsentStatusForVendor(e).filter((function(e){return void 0!==e})).subscribe((function(e){!0!==e&&!1!==e||void 0!==t&&t()}))}))},window.appendScript=function(e,t=!1){var i=document.createElement("script");i.src=e,t&&(i.async=!0),document.body.appendChild(i)};const Y=()=>{let e;return e=window.innerWidth>992?"desktop":"webmobile",e},J=(e,t)=>{const i={876450612001:"BFMBusiness",5132998232001:"BFMParis",6012566821001:"BFMLyon",876450610001:"BFMTV",876630703001:"RMCInfo",1969646226001:"RMCDecouverte",887906353001:"RMCSport",5817780576001:"RMCStory",854081247001:"BFM2",4005328962001:"BFMTV",6093072304001:"BFMGrandLille",6221855449001:"BFMDICIAlpes",6221855446001:"BFMDICIProvence",6244892570001:"BFMCotedAzur",6244892569001:"BFMMarseille",6244892572001:"BFMVar",6306058915001:"Tech&Co",6296494067001:"BFMAlsace",6309369204001:"RMCCrime",6297152399001:"BFMNormandie",6102712761001:"BFMGrandLittoral"};return`${Object.keys(i).filter((t=>t==e)).length>0?i[e]:"undefined"}_all-${t}`};class W{constructor(e,t,i){this.player=e.ref,this.options={},this.adVisibilityHandlerExecuted=!1,this.segmentsTopics=i,this.siteSectionObject=t,this.parseOptions(),console.log(`Player #${this.player.id_} ready`),((e,t,i)=>{if(["876450612001","6306058915001"].includes(t.accountId.toString())){let n=new pa.avInsights.Media({0:10,1:60,2:60},5),o={};pa.privacy.setMode("exempt"),pa.privacy.include.property("av_*","exempt"),pa.privacy.include.event("av.*","exempt"),e.on("loadstart",(()=>{const r=new Intl.DateTimeFormat([],{timeZone:"Europe/Paris",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(new Date(e.mediainfo.publishedAt)),s=`${r[4].value}-${r[0].value}-${r[2].value}T${r[6].value}:${r[8].value}:${r[10].value}Z`,a="vertical"===t.type?["vod","vod_vertical"]:["vod"],l=-.001===e.mediainfo.duration?["live_event","live"]:["live"];let d=!(e.mediainfo.duration>0),c=e.bcAnalytics?.settings?.platformVersion?e.bcAnalytics.settings.platformVersion:"";o.av_content_id=e.mediainfo.accountId+"-"+e.mediainfo.id,o.av_player=e.bcAnalytics.settings.playerName.split("-")[0].trim()+" - "+e.bcinfo.playerId,o.av_player_version=c,o.av_player_format=d?"m3u8":"mp4",o.av_content=e.mediainfo.name,o.av_content_type="video",o.av_content_duration=d?null:1e3*e.mediainfo.duration,o.av_channel=i.split("_")[0],o.av_publication_date=s,o.av_episode=e.mediainfo.name,o.av_content_genre=d?l:a,o.av_broadcasting_type=d?"Live":"Vod",o.av_episode_id=e.mediainfo.accountId+"-"+e.mediainfo.id,o.av_broadcaster=i.split("_")[0],o.av_auto_mode=t.autoplay,o.av_player_position=t.position,o.av_url=window.location.href,o.av_keywords=e.mediainfo.tags,o.av_language="FR",e.mediainfo.tags.length>0&&(o.av_content_theme1=e.mediainfo.tags[0]),e.mediainfo.tags.length>1&&(o.av_content_theme2=e.mediainfo.tags[1]),e.mediainfo.tags.length>2&&(o.av_content_theme3=e.mediainfo.tags[2]),n.setProps(o),console.log(o,"piano properties"),e.one("ima3-ad-error",(e=>{o.av_player_error="error ads - "+e.originalEvent.error.data.errorMessage,n.setProps(o),n.playbackStart(0,(function(){console.log(o,"test")})),n.error("error ads - "+e.originalEvent.error.data.errorMessage,(function(){console.log(o,"test")}))})),e.one("ads-allpods-completed",(()=>{n.playbackStart(0,(function(){console.log(o,"test")}))})),e.on("ads-ad-started",(()=>{n.display(0,(function(){console.log(o,"test")}))})),e.on("pause",(()=>{n.playbackPaused(0,(function(){console.log(o,"test")})),e.one("play",(()=>{n.playbackResumed(0,(function(){console.log(o,"test")}))}))})),e.on("ima3-click",(()=>{n.adClick(0,(function(){console.log(o,"test")}))})),e.on("ended",(()=>{n.playbackStopped(0,(function(){console.log(o,"test")}))})),e.on("waiting",(()=>{n.bufferStart(0,(function(){console.log(o,"test")}))}))})),e.on("error",(()=>{o.av_player_error="Error video - vidÃ©o indisponible",n.setProps(o),n.error("Error video - "+e.error().message+e.error().code,(function(){console.log(o,"test")}))}))}})(this.player,this.options,this.siteSectionObject),this.resize(),this.eventsHandling()}parseOptions(){const e=this.getPlayerHTML().parentElement.attributes;this.options={autoplay:void 0!==e.autoplay.value&&"true"==e.autoplay.value,adjustFromMediaSize:void 0!==e.adjustfrommediasize&&"true"==e.adjustfrommediasize.value,pip:"true"==e.pip.value,disableVisibilityHandler:void 0!==e.disableVisibilityHandler&&"true"==e.disableVisibilityHandler.value,accountId:e.accountId.value,position:e.position.value},console.log("options",this.options)}getPlayerHTML(){return this.player.el()}isDirectLIVE(){return console.log(this.player.duration(),"piano duration"),this.player.duration()===1/0||0===this.player.mediainfo.duration}resize(){this.getPlayerHTML().classList.add("video_player")}autoplayHandling(){if(this.options.autoplay){this.player.muted(!0);const e=this.player.play();void 0!==e&&e.then((()=>{})).catch((e=>{this.player.muted(!0),this.player.play()}))}else this.player.muted(!1)}showControlPanel(){const e=()=>{const e=document.getElementById("controlPanel_VOD_Desktop"),t=document.getElementById("previewBlock_Desktop");if(!e||!t)return void(this.player.controlBar.el().style.display="flex");this.getPlayerHTML().appendChild(e.content.cloneNode(!0));const i=this.getPlayerHTML().querySelector(".controlPanel"),n=i.querySelector(".bottomBar"),o=n.querySelector(".centeredButtons"),s=n.querySelector(".rightButtons"),l=this.player.addChild("PlayToggle"),d=this.player.addChild("ProgressControl"),c=d.el().querySelector(".vjs-play-progress"),p=this.player.addChild("CurrentTimeDisplay"),u=this.player.addChild("durationDisplay"),y=o.querySelector(".rewindButton"),h=o.querySelector(".forwardButton"),m=o.querySelector(".irisBackward"),v=o.querySelector(".irisForward"),f=n.querySelector(".volumePanel"),g=this.player.addChild("MuteToggle"),b=this.player.addChild("VolumeControl"),_=this.player.addChild("FullscreenToggle"),E=i.querySelector(".playlistArea"),S=E.querySelector(".movingScroller"),C=E.querySelector(".scrollLeft"),I=E.querySelector(".scrollRight"),w=i.querySelector(".thumbnailPrevious"),L=i.querySelector(".thumbnailNext"),T=this.getPlayerHTML().querySelector(".topRightButton"),{player:P}=this;i.style.display="none";let B=null;"undefined"!=typeof irisInstances&&irisInstances.length>0&&(console.log("iris"),B=irisInstances.filter((e=>e.id==this.getPlayerHTML().id)),B=B&&B.length>0?B[0]:null),B?(m.addEventListener("click",(()=>{irisPlayer.getCurrentIndexByEid(B.eid)>0&&irisPlayer.skipToIndexByEid(B.eid,irisPlayer.getCurrentIndexByEid(B.eid)-1)})),v.addEventListener("click",(()=>{irisPlayer.skipToIndexByEid(B.eid,irisPlayer.getCurrentIndexByEid(B.eid)+1)}))):(m.style.visibility="hidden",v.style.visibility="hidden",C.style.visibility="hidden",I.style.visibility="hidden"),y.onclick=()=>{this.player.currentTime(this.player.currentTime()-10)},h.onclick=()=>{this.player.currentTime(this.player.currentTime()+10)},f.appendChild(g.el()),f.appendChild(b.el()),o.insertBefore(l.el(),y.nextSibling),o.insertBefore(m,y),o.insertBefore(v,h.nextSibling),n.appendChild(d.el()),n.appendChild(p.el()),n.appendChild(u.el()),n.insertBefore(f,o),s.appendChild(_.el());const M=f.querySelector(".vjs-volume-control .vjs-volume-bar .vjs-volume-level");let q;if(l.addClass("vjs-playing"),M.classList.add("icon-circular-shape-silhouette"),c.classList.add("icon-circular-shape-silhouette"),C.classList.add("icon-backward-arrow"),I.classList.add("icon-forward-arrow"),B&&(q=setInterval((()=>{!function(){const e=irisPlayer.getPlaylistByEid(B.eid);if(e.length<2)return;clearInterval(q),e.map(((i,n)=>{S.appendChild(t.content.cloneNode(!0)),O(S,i,n),n==e.length-1&&x()}))}()}),2e3),this.player.on("playing",(()=>{0==irisPlayer.getCurrentIndexByEid(B.eid)?(m.classList.add("disableButton"),m.setAttribute("disabled","")):(m.classList.remove("disableButton"),m.removeAttribute("disabled")),x()}))),this.getPlayerHTML().addEventListener("mouseenter",(()=>{r(!0,i,!1)})),this.getPlayerHTML().addEventListener("mouseleave",a((()=>{r(!1,i,!1,150)}),200)),(()=>{let e=null;const t=()=>{r(!0,i,!1),clearTimeout(e),e=setTimeout((()=>{r(!1,i,!1,150)}),3e3)};this.getPlayerHTML().addEventListener("mousemove",t),this.getPlayerHTML().addEventListener("click",t)})(),this.player.muted()){g.addClass("vjs-vol-0"),M.style.width=0;const e=this.player.addChild("MuteToggle");T.appendChild(e.el()),e.addClass("muteCustomButton"),e.addClass("vjs-vol-0");const t=()=>{this.player.muted()||(T.remove(),this.player.off(["volumechange","playing"],t))};this.player.on(["volumechange","playing"],t)}else T.remove();function x(){const e=irisPlayer.getPlaylistByEid(B.eid),i=irisPlayer.getCurrentIndexByEid(B.eid),n=S.querySelector(".previewBlock .activeThumbnailPreview"),o=S.querySelector(".previewBlock .irisNextBlock");if(n&&(n.classList.remove("activeThumbnailPreview"),n.querySelector(".irisCurrentMessage").remove(),o.classList.remove("irisNextBlock"),o.querySelector(".irisNextMessage").remove()),S.firstChild){const e=S.querySelector(`#${P.id_}_previewBlock${i}`);e.querySelector(".thumbnailContainer").classList.add("activeThumbnailPreview");const t=document.createElement("p");t.innerText="EN LECTURE",t.classList.add("irisCurrentMessage"),e.querySelector(".thumbnailContainer").appendChild(t);const n=S.querySelector(`#${P.id_}_previewBlock${i+1}`);n.querySelector(".thumbnailContainer").classList.add("irisNextBlock");const o=document.createElement("p");o.innerText="A SUIVRE",o.classList.add("irisNextMessage"),n.querySelector(".thumbnailContainer").appendChild(o)}for(;w.firstChild;)w.removeChild(w.firstChild);for(;L.firstChild;)L.removeChild(L.firstChild);w.appendChild(t.content.cloneNode(!0)),L.appendChild(t.content.cloneNode(!0)),i>0&&O(w,e[i-1],i-1,`${P.id_}thumbnailPrevious`),O(L,e[i+1],i+1,`${P.id_}thumbnailNext`)}function O(e,t,i,n){const o=e.lastElementChild;var r,s;o.id=n||`${P.id_}_previewBlock${i}`,t.image_url&&(o.querySelector(".thumbnailPreview").src=t.image_url.replace("160x90","320x180")),o.querySelector(".descriptionPreview").innerText=(r=t.title,s=55,r.substr(0,s)+(r.length>s?"...":"")),o.querySelector(".jumpToVideo").addEventListener("click",(()=>{irisPlayer.skipToIndexByEid(t.eid,i)}))}this.player.on("pause",(()=>{E.style.display="flex"})),this.player.on("play",(()=>{E.style.display="none"})),C.addEventListener("mousedown",(()=>{S.scrollLeft=S.scrollLeft-230})),I.addEventListener("mousedown",(()=>{S.scrollLeft=S.scrollLeft+230})),m.addEventListener("mouseover",(()=>{m.hasAttribute("disabled")||(w.style.visibility="visible")})),m.addEventListener("mouseleave",(()=>{w.style.visibility="hidden"})),v.addEventListener("mouseover",(()=>{L.style.visibility="visible"})),v.addEventListener("mouseleave",(()=>{L.style.visibility="hidden"}))},t=()=>{const e=document.getElementById("controlPanel_VOD_Mobile");if(!e)return void(this.player.controlBar.el().style.display="flex");this.getPlayerHTML().appendChild(e.content.cloneNode(!0));const t=this.getPlayerHTML().querySelector(".controlPanel"),i=t.querySelector(".VOD_Mobile_Controls").querySelector(".centeredButtons"),n=t.querySelector(".bottomControls"),o=this.player.addChild("PlayToggle"),a=this.player.addChild("ProgressControl"),l=this.player.addChild("CurrentTimeDisplay"),d=this.player.addChild("durationDisplay"),c=i.querySelector(".rewindButton"),p=i.querySelector(".forwardButton"),u=i.querySelector(".irisBackward"),y=i.querySelector(".irisForward"),h=this.player.addChild("FullscreenToggle"),m=this.getPlayerHTML().querySelector(".topRightButton");t.style.display="none";let v=null;"undefined"!=typeof irisInstances&&irisInstances.length>0&&(v=irisInstances.filter((e=>e.id==this.getPlayerHTML().id)),v=v&&v.length>0?v[0]:null),v&&(u.addEventListener("click",(()=>{irisPlayer.skipToIndexByEid(v.eid,irisPlayer.getCurrentIndexByEid(v.eid)-1)})),y.addEventListener("click",(()=>{irisPlayer.skipToIndexByEid(v.eid,irisPlayer.getCurrentIndexByEid(v.eid)+1)}))),v&&"undefined"!=typeof irisPlayer&&(irisPlayer.getCurrentIndexByEid(v.eid)>0&&u.addEventListener("click",(()=>{irisPlayer.skipToIndexByEid(v.eid,irisPlayer.getCurrentIndexByEid(v.eid)-1)})),y.addEventListener("click",(()=>{irisPlayer.skipToIndexByEid(v.eid,irisPlayer.getCurrentIndexByEid(v.eid)+1)}))),c.onclick=()=>{this.player.currentTime(this.player.currentTime()-10)},p.onclick=()=>{this.player.currentTime(this.player.currentTime()+10)},i.insertBefore(o.el(),c.nextSibling),i.insertBefore(u,c),i.insertBefore(y,p.nextSibling),n.appendChild(l.el()),n.appendChild(a.el()),n.appendChild(d.el()),n.appendChild(h.el()),t.classList.add("hideElements"),o.addClass("vjs-playing"),a.el_.querySelector(".vjs-play-progress").classList.add("icon-circular-shape-silhouette"),v?this.player.on("playing",(()=>{0==irisPlayer.experience.playlist.getInfo().findIndex((e=>e.platform_id==this.player.mediainfo.id))?(u.classList.add("disableButton"),u.setAttribute("disabled","")):(u.classList.remove("disableButton"),u.removeAttribute("disabled"))})):(u.style.visibility="hidden",y.style.visibility="hidden"),s(!1,t);let f=null;this.getPlayerHTML().addEventListener("touchend",(e=>{if(t.classList.contains("hideElements")&&!t.classList.contains("customBlur")){if(e.target.closest(".muteCustomButton"))return;r(!0,t,!0);const i=this.getPlayerHTML().querySelector(".hasBeenClicked");i&&(i.style.visibility="visible"),f=setTimeout((()=>{r(!1,t,!0),i&&(i.style.visibility="")}),2e3)}})),[o.el(),u,y,c,p,h.el()].forEach((e=>{e.addEventListener("touchstart",(()=>{clearTimeout(f),f=setTimeout((()=>{r(!1,t,!0);const e=this.getPlayerHTML().querySelector(".hasBeenClicked");e&&(e.style.visibility="")}),2e3)}))}));const g=this.player.addChild("MuteToggle");if(m.appendChild(g.el()),g.addClass("muteCustomButton"),this.player.muted()){g.addClass("vjs-vol-0");const e=()=>{this.player.muted()||(m.classList.add("hasBeenClicked"),this.player.off(["volumechange","playing"],e))};this.player.on(["volumechange","playing"],e)}else g.addClass("vjs-vol-3"),m.classList.add("hasBeenClicked")},i=()=>{const e=document.getElementById("controlPanel_LIVE_Desktop");if(!e)return void(this.player.controlBar.el().style.display="flex");this.getPlayerHTML().appendChild(e.content.cloneNode(!0));const t=this.getPlayerHTML().querySelector(".controlPanel"),i=t.querySelector(".bottomBar"),n=i.querySelector(".rightButtons"),o=i.querySelector(".volumePanel"),s=this.player.addChild("MuteToggle"),l=this.player.addChild("VolumeControl"),d=this.player.addChild("FullscreenToggle"),c=i.querySelector(".directHolder").querySelector(".directIcon"),p=this.getPlayerHTML().querySelector(".topRightButton");t.style.display="none",o.appendChild(s.el()),o.appendChild(l.el()),i.appendChild(o),n.appendChild(d.el());const u=o.querySelector(".vjs-volume-control .vjs-volume-bar .vjs-volume-level");if(u.classList.add("icon-circular-shape-silhouette"),c.classList.add("icon-circular-shape-silhouette"),this.getPlayerHTML().addEventListener("mouseenter",(()=>{r(!0,t,!1)})),this.getPlayerHTML().addEventListener("mouseleave",a((()=>{r(!1,t,!1,150)}),200)),(()=>{let e=null;const i=()=>{r(!0,t,!1),clearTimeout(e),e=setTimeout((()=>{r(!1,t,!1,150)}),3e3)};this.getPlayerHTML().addEventListener("mousemove",i),this.getPlayerHTML().addEventListener("click",i)})(),this.player.muted()){s.addClass("vjs-vol-0"),u.style.width=0;const e=this.player.addChild("MuteToggle");p.appendChild(e.el()),e.addClass("muteCustomButton"),e.addClass("vjs-vol-0");const t=()=>{this.player.muted()||(p.remove(),this.player.off(["volumechange","playing"],t))};this.player.on(["volumechange","playing"],t)}else p.remove()},n=()=>{const e=document.getElementById("controlPanel_LIVE_Mobile");if(!e)return void(this.player.controlBar.el().style.display="flex");this.getPlayerHTML().appendChild(e.content.cloneNode(!0));const t=this.getPlayerHTML().querySelector(".controlPanel"),i=t.querySelector(".bottomBar"),n=i.querySelector(".rightButtons"),o=this.player.addChild("FullscreenToggle"),a=i.querySelector(".directHolder").querySelector(".directIcon"),l=this.getPlayerHTML().querySelector(".topRightButton");t.style.display="none",n.appendChild(o.el()),a.classList.add("icon-circular-shape-silhouette"),t.classList.add("hideElements"),s(!1,t);let d=null;this.getPlayerHTML().addEventListener("touchend",(e=>{if(t.classList.contains("hideElements")&&!t.classList.contains("customBlur")){if(e.target.closest(".muteCustomButton"))return;r(!0,t,!0);const i=this.getPlayerHTML().querySelector(".hasBeenClicked");i&&(i.style.visibility="visible"),d=setTimeout((()=>{r(!1,t,!0);const e=this.getPlayerHTML().querySelector(".hasBeenClicked");e&&(e.style.visibility="")}),2e3)}})),o.el().addEventListener("touchstart",(()=>{clearTimeout(d),d=setTimeout((()=>{r(!1,t,!0),muteButton&&(muteButton.style.visibility="")}),2e3)}));const c=this.player.addChild("MuteToggle");if(l.appendChild(c.el()),c.addClass("muteCustomButton"),this.player.muted()){c.addClass("vjs-vol-0");const e=()=>{this.player.muted()||(l.classList.add("hasBeenClicked"),this.player.off(["volumechange","playing"],e))};this.player.on(["volumechange","playing"],e)}else c.addClass("vjs-vol-3"),l.classList.add("hasBeenClicked")};let o=!1;function r(e,t,i,n){e?(t.classList.remove("hideElements"),t.classList.add("customBlur"),t.style.display="block",o=!0,i&&s(!0,t)):(t.classList.add("hideElements"),o=!1,setTimeout((()=>{o||(t.classList.remove("customBlur"),t.style.display="none",i&&s(!1,t))}),n||800))}function s(e,t){e?setTimeout((()=>{t.querySelectorAll("button, .bottomControls .vjs-progress-control").forEach((e=>{e.style.pointerEvents="auto"}))}),200):t.querySelectorAll("button, .bottomControls .vjs-progress-control").forEach((e=>{e.style.pointerEvents="none"}))}function a(e,t){let i=Date.now();return function(){i+t-Date.now()<0&&(e(),i=Date.now())}}this.isDirectLIVE()?this.player.hasClass("vjs-touch-enabled")?n():i():this.player.hasClass("vjs-touch-enabled")?t():e()}eStatStartMeasure(){const{player:e}=this;if(!e.hasOwnProperty("eStatApi"))return void console.log("[eStat] Not available");if(!e.eStatApi.hasOwnProperty("startMeasure"))return void console.log("[eStat] No startMeasure");const t=setInterval((()=>{if(e.readyState()>=4){console.log("[eStat] Started Measure"),clearInterval(t);try{e.eStatApi.setConsentType("exempted"),e.eStatApi.setConsentString(Didomi.getUserStatus().consent_string)}catch(e){console.log(`Error eStatApi : ${e}`)}e.eStatApi.startMeasure()}}),300,e)}adVisibilityHandler(){const{adPlayer:e}=this.player.ima3;if(!VisSense)return void console.log("VisSense not found. No adVisibilityHandler");const t=VisSense(this.getPlayerHTML()).monitor();this.player.on("ads-ad-started",(()=>{let i=!0;const n=t=>{t._visobj._element.classList.contains("vjs-ad-playing")&&(t._state.percentage>.7&&i?setTimeout((()=>e?e.play():this.player.play()),200):setTimeout((()=>e?e.pause():this.player.pause()),200))};t.on("percentagechange",(e=>n(e))),t.start(),console.log("ads-ad-started"),window.addEventListener("blur",(()=>{const{activeElement:e}=document;void 0!==e&&null!=e&&"IFRAME"!=e.tagName&&(i=!1,console.log("blur"),n(t))})),window.addEventListener("focus",(()=>{i=!0,console.log("focus"),n(t)}))}))}eventsHandling(){const e=t=>{("durationchange"===t.type&&this.isDirectLIVE()||"loadedmetadata"===t.type)&&(this.autoplayHandling(),this.player.one("playing",(()=>{this.showControlPanel()})),this.player.off(["loadedmetadata","durationchange"],e))};this.player.on(["loadedmetadata","durationchange"],e),this.player.on("playing",(()=>{console.log("EVENT : PLAYING"),this.options.adjustFromMediaSize&&this.resizeByMediaSize(),this.eStatStartMeasure()}));const t=["loadstart","playing","play"],i=[];let n=!1;this.player.on(t,(e=>{console.log("Custom Log Event",e.type),n||(-1==i.indexOf(e.type)&&i.push(e.type),t.filter((e=>i.indexOf(e)>-1)).length==t.length&&(n=!0,console.log("Video Viewed",i)))}));const o=document.cookie.split(" ")&&document.cookie.split(" ").filter((e=>"firstid"==e.split("=")[0]))[0]&&document.cookie.split(" ").filter((e=>"firstid"==e.split("=")[0]))[0].split("=")[1]?`${encodeURIComponent(document.cookie.split(" ").filter((e=>"firstid"==e.split("=")[0]))[0].split("=")[1].replace(";",""))}`:"";let r="",s="";try{r=JSON.parse(localStorage.utiqPass).connectId?.idGraph[0]?.atid?`${encodeURIComponent(JSON.parse(localStorage.utiqPass).connectId?.idGraph[0]?.atid)}`:"",s=JSON.parse(localStorage.utiqPass).connectId?.idGraph[0]?.mtid?`${encodeURIComponent(JSON.parse(localStorage.utiqPass).connectId?.idGraph[0]?.mtid)}`:""}catch(e){console.log("error utiq json",e)}const a="&extra_eids="+(o?"1S-first-id.fr,1ID-"+o+",1ATYPE-1!":"")+(r?"2S-utiq.com,2ID-"+r+",2ATYPE-3!":"")+(s?"3S-utiq-mtp.com,3ID-"+s+",3ATYPE-3":"")+("&fw_3P_uid="+(o?"firstid:"+o+(r?",":""):"")+(r?"utiq:"+r+",":"")+(s?"utiqmtp:"+s:""));if(this.player.on("ima3-ready",(()=>{this.isDirectLIVE()&&["876450610001","854081247001"].includes(this.player.mediainfo.accountId)&&!document.cookie.indexOf("lowpression")>-1&&this.player.one("ads-ad-ended",(()=>{this.player.one("ads-allpods-completed",(()=>{const e=new Date;e.setTime(e.getTime()+3e5);let t="expires="+e.toUTCString();document.cookie="lowpression=true;Secure;domain=bfmtv.com;"+t+";path=/"}))})),this.adVisibilityHandlerExecuted||(this.adVisibilityHandlerExecuted=!0,this.options.disableVisibilityHandler||this.adVisibilityHandler());const e=this.player.mediainfo.tags?encodeURIComponent("&tags="+this.player.mediainfo.tags.toString().replaceAll(",","&tags=").replaceAll(" ","_")):"",t=encodeURIComponent("&type_contenu="+tc_vars.type_contenu+"&taille_contenu="+tc_vars.taille_contenu+"&id="+tc_vars.id_contenu+"&rub="+tc_vars.chapitre1+"&verticale="+tc_vars.verticale+"&marque="+tc_vars.marque+"&type_page="+tc_vars.type_page+"&version_responsive="+tc_vars.version_responsive+"&embeded_element="+tc_vars.embeded_element.toString()+"&nbr_posts="+tc_vars.nbr_posts.toString()+"&nb_paragraphe="+tc_vars.nbr_paragraphes.toString()),i=encodeURIComponent("topics="+this.segmentsTopics.t.toString().replaceAll(",","&topics=")+"&s1px="+this.segmentsTopics.s.toString().replaceAll(",","&s1px=")),n=this.isDirectLIVE(),o=void 0!==this.getPlayerHTML().dataset.applicationId?this.getPlayerHTML().dataset.applicationId:"undefined",r=["876450610001","854081247001"].includes(this.player.mediainfo.accountId)&&document.cookie.indexOf("lowpression")>-1&&n?"-lowpression":"",s=`${this.siteSectionObject}-${n?"Live":"VOD"}-${o+r}`;this.player.ima3.adMacroReplacement=function(o){const r={"?w={player.width}":`?w=${this.player.tech_.el_.offsetWidth}`,"&h={player.height}":`&h=${this.player.tech_.el_.offsetHeight}`,"&cb={random}":`&cb=${Math.floor(1e6*Math.random())+1}`,"&content_id={mediainfo.id}":`&content_id=${this.player.mediainfo.id}`,"&content_livestream=0":"&content_livestream="+(n?1:0),"&url={window.location.href}":`&url=${window.location.href}`,"&gdpr_consent=0":`&gdpr_consent=${Didomi.getUserStatus().consent_string}`,"&gdpr=0":"&gdpr="+(Didomi.isRegulationApplied("gdpr")?1:0),"&altice_data=0":`&altice_data=${i+e+t}`,"&env=0":`&env=${Y()}`,"&channel_name=0":`&channel_name=${encodeURIComponent(s)}`,"&dur={mediainfo.duration}":`&dur=${0!=this.player.mediainfo.duration?Math.round(this.player.mediainfo.duration):500}`};for(var l in r)o=o.split(l).join(r[l]);return o+=a}})),["6007746175001","6346069778112","6309113478112","6354432814112"].includes(this.getPlayerHTML().dataset.videoId)){const e="00000000-0000-0000-0000-000000000000";if(!sessionStorage.getItem("ssid")||sessionStorage.getItem("ssid")===e){const t=new XMLHttpRequest;t.withCredentials=!0,t.open("GET","https://sync.springserve.com/usersync/json",!0),t.onreadystatechange=function(){4===t.readyState&&200===t.status?sessionStorage.setItem("ssid",JSON.parse(t.responseText).user_id):sessionStorage.setItem("ssid",e)},t.send()}this.player.one("play",(()=>{if(!this.player.currentSource().src.includes("sfr.net")){const e=encodeURIComponent("topics="+this.segmentsTopics.t.toString().replaceAll(",","&topics=")+"&s1px="+this.segmentsTopics.s.toString().replaceAll(",","&s1px=")),t=this.player.currentSource().src+`?w=${this.player.tech_.el_.offsetWidth}`+`&h=${this.player.tech_.el_.offsetHeight}`+`&pod_max_dur=${this.player.ads.pod.duration}`+`&env=${Y()}`+`&channel_name=${encodeURIComponent(`${this.siteSectionObject}-Live-${("undefined"!=this.getPlayerHTML().dataset.applicationId?this.getPlayerHTML().dataset.applicationId:"undefined")+(["876450610001","854081247001"].includes(this.player.mediainfo.accountId)&&document.cookie.indexOf("lowpression")>-1?"-lowpression":"")}`)}`+`&content_id=${this.player.mediainfo.id}&gdpr=`+(Didomi.isRegulationApplied("gdpr")?1:0)+`&gdpr_consent=${Didomi.getUserStatus().consent_string}`+`&altice_data=${e}`+`&ssid=${sessionStorage.getItem("ssid")}`+`&url=${encodeURIComponent(window.location.href)}`;document.cookie.split("firstid");this.player.src([{type:"application/vnd.apple.mpegurl",src:t+a}]),console.log(t,"src live ssai")}}))}["1920204345001","5615950982001"].includes(this.getPlayerHTML().dataset.videoId)&&this.player.one("adsready",(()=>{if(!this.player.currentSource().src.includes("sfr.net")){const e=encodeURIComponent("s1px="+this.segmentsTopics.s.toString().replaceAll(",","&s1px=")),t=encodeURIComponent("topics="+this.segmentsTopics.t.toString().replaceAll(",","&topics=")),i=this.player.currentSource().src+`?consent_string=${Didomi.getUserStatus().consent_string}`+`&altice_segment=${e}`+`&altice_topic=${t}`;this.player.src([{type:"application/vnd.apple.mpegurl",src:i+a}]),console.log(i,"src live ssai legacy")}})),this.player.ready((()=>{this.player.responsive(!1)})),this.player.on("error",(()=>{const e=this.player.error(),t=this.getPlayerHTML().parentElement,i="VIDEO_CLOUD_ERR_NOT_PLAYABLE"==e.code||"VIDEO_CLOUD_ERR_VIDEO_NOT_FOUND"==e.code?"unavailable":"PLAYER_ERR_GEO_RESTRICTED"==e.code?"geobanned":"none";if("none"!=i){this.player.dispose();const e=document.getElementById("errorTemplate");if(!e)return;t.appendChild(e.content.cloneNode(!0));t.querySelector(".ErrorMessage").innerText=`Ce contenu n'est ${"unavailable"==i?"plus disponible":"pas disponible depuis votre pays"}.`}})),this.player.ready((()=>{const e=document.querySelector(".pip-article");0==this.options.pip&&this.player.pip().disable();if(e){const t=document.getElementById("content_header");new IntersectionObserver((t=>{((e,t)=>{const i=e.querySelector(".video-js");i&&(t?i.classList.remove("vjs-pip-active","vjs-pip-x-left","vjs-pip-y-top"):i.classList.add("vjs-pip-active","vjs-pip-x-left","vjs-pip-y-top"),e.offsetTop>window.scrollY&&i.classList.remove("vjs-pip-active","vjs-pip-x-left","vjs-pip-y-top"))})(e,t[0].isIntersecting)}),{threshold:0}).observe(t)}if(document.querySelector(".article_page")&&e){const t=document.getElementById("content_body_bottom");let i;const n=(e,t,i)=>{if(e.style.display=i,t){if(this.player.el_.classList.contains("vjs-ad-playing"))return"none"===i?this.player.pause():this.player.play();t.style.display}};if("S"===window.deviceSize)e.querySelector(".vjs-control-bar")&&!i&&(i=e.querySelector(".vjs-control-bar")),new IntersectionObserver((t=>{t[0].isIntersecting?n(e,i,"none"):n(e,i,"block")}),{threshold:0}).observe(t);else{let o="L"!==window.deviceSize?190:140;window.addEventListener("scroll",throttle((()=>{e.querySelector(".vjs-control-bar")&&!i&&(i="L"==window.deviceSize?e.querySelector(".vjs-control-bar.vjs-ad-control-bar"):e.querySelector(".vjs-control-bar")),Math.round(t.getBoundingClientRect().top-50)<=o?n(e,i,"none"):n(e,i,"block")}),300,!1,!0))}}})),this.player.on("ads-ad-started",(()=>{const e=document.createElement("div"),t=this.getPlayerHTML();e.classList.add("ad-counter"),e.innerText="Votre programme dans un instant",t.appendChild(e),this.player.one("ads-ad-ended",(()=>{t.removeChild(e)}))}))}}!function(){const e=document.querySelectorAll(".video_block"),t={t:[],s:[]};Didomi.getObservableOnUserConsentStatusForVendor(92).filter((function(e){return void 0!==e})).subscribe((function(e){if(!0===e||!1===e){let e=Didomi.isRegulationApplied("gdpr")?"1":"0",i="";Didomi.getUserStatus()&&(i=Didomi.getUserStatus().consent_string),((e,t,i)=>{const n=`https://www.bfmtv.com${window.location.pathname}`,o=`https://nextms.profiles.tagger.opecloud.com/v1/targeting?url=${encodeURIComponent(n)}&gdpr_applies=${t}&consent_string=${i}`;return fetch(o,{referrerPolicy:"no-referrer-when-downgrade",mode:"cors",credentials:"include"}).then((e=>e.json())).then((e=>e)).catch((e=>console.error(e)))})(window.location.href,e,i).then((e=>{if(e&&e.t&&e.s){const{t:i,s:n}=e;i.forEach((e=>t.t.push(e))),n.forEach((e=>t.s.push(e)))}}))}}));const i=e[0];if(o(document.querySelector(`#${i.id}`),t,!0),e.length>1){const i=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&(e.target.hasAttribute("data-llv-status")||(o(e.target,t),e.target.setAttribute("data-llv-status","loaded")))}))}),{threshold:0});e.forEach((function(e,t){t>0&&i.observe(e)}))}function n(e){e.setAttribute("playsinline","true")}function o(e,t,i=!1){const o=[];return G({refNode:e,accountId:e.getAttribute("accountid"),playerId:e.getAttribute("playerid"),videoId:e.getAttribute("videoid"),applicationId:e.getAttribute("applicationid"),options:{id:"vjs-player-"+e.getAttribute("videoid"),preload:e.getAttribute("preload")},onEmbedCreated:n}).then((e=>{o.push(new W(e,J(e.ref.bcinfo.accountId,Y()),t))})).then((()=>{i&&window.dispatchEvent(new CustomEvent("AllPlayersCreated",{detail:{players:o}}))})).catch((e=>{console.log("error",e)}))}}()})()})();